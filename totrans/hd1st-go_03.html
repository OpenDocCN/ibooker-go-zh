<html><head></head><body><section data-pdf-bookmark="Chapter 2. which code runs next?: Conditionals and Loops" data-type="chapter" epub:type="chapter" class="preface"><div class="preface" id="which_code_runs_nextquestcolon_condition">
<h1 class="calibre17"><span class="calibre">Chapter 2. </span>which code runs next?: Conditionals and Loops</h1>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0031-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><a data-primary="conditional statements" data-type="indexterm" id="idm46062715198024" class="calibre10"/><a data-primary="conditional statements" data-secondary="about" data-type="indexterm" id="idm46062715196968" class="calibre10"/><a data-primary="loops" data-secondary="about" data-type="indexterm" id="idm46062715195960" class="calibre10"/><a data-primary="statements" data-secondary="conditional" data-see="conditional statements" data-type="indexterm" id="idm46062715194808" class="calibre10"/><strong class="calibre8">Every program has parts that apply only in certain situations</strong>. “This code should run <em class="calibre9">if</em> there’s an error. Otherwise, that other code should run.” Almost every program contains code that should be run only when a certain <em class="calibre9">condition</em> is true. So almost every programming language provides <strong class="calibre8">conditional statements</strong> that let you determine whether to run segments of code. Go is no exception.</p>
<p class="calibre7">You may also need some parts of your code to run <em class="calibre9">repeatedly</em>. Like most languages, Go provides <strong class="calibre8">loops</strong> that run sections of code more than once. We’ll learn to use both conditionals and loops in this chapter!</p>
<section data-pdf-bookmark="Calling methods" data-type="sect1" class="preface"><div class="preface" id="calling_methods">
<h1 class="calibre25">Calling methods</h1>
<p class="calibre7"><a data-primary="calling methods" data-type="indexterm" id="idm46062715187880" class="calibre10"/><a data-primary="functions" data-secondary="methods and" data-type="indexterm" id="idm46062715187080" class="calibre10"/><a data-primary="methods" data-secondary="about" data-type="indexterm" id="idm46062715185928" class="calibre10"/><a data-primary="methods" data-secondary="calling" data-type="indexterm" id="idm46062715184856" class="calibre10"/><a data-primary="methods" data-secondary="defining" data-type="indexterm" id="idm46062715183672" class="calibre10"/><a data-primary="methods" data-secondary="functions and" data-type="indexterm" id="idm46062715182600" class="calibre10"/><a data-primary="methods" data-secondary="types and" data-type="indexterm" id="idm46062715181464" class="calibre10"/><a data-primary="Now function (time)" data-type="indexterm" id="idm46062715180392" class="calibre10"/><a data-primary="packages" data-seealso="specific packages" data-type="indexterm" id="idm46062715179560" class="calibre10"/><a data-primary="time package" data-secondary="Now function" data-type="indexterm" id="idm46062715178424" class="calibre10"/><a data-primary="time package" data-secondary="Time type" data-type="indexterm" id="idm46062715177352" class="calibre10"/><a data-primary="time package" data-secondary="Year method" data-type="indexterm" id="idm46062715176216" class="calibre10"/><a data-primary="Time type (time)" data-type="indexterm" id="idm46062715175144" class="calibre10"/><a data-primary="types" data-secondary="methods and" data-type="indexterm" id="idm46062715174312" class="calibre10"/><a data-primary="Year method (time)" data-type="indexterm" id="idm46062715173176" class="calibre10"/>In Go, it’s possible to define <strong class="calibre8">methods</strong>: functions that are associated with values of a given type. Go methods are kind of like the methods that you may have seen attached to “objects” in other languages, but they’re a bit simpler.</p>
<p class="calibre7">We’ll be taking a detailed look at how methods work in <a data-type="xref" href="ch09.html#yoursquore_my_typecolon_defined_types" class="calibre10">Chapter 9</a>. But we need to use a couple methods to make our examples for this chapter work, so let’s look at some brief examples of calling methods now.</p>
<p class="calibre7">The <code class="calibre20">time</code> package has a <code class="calibre20">Time</code> type that represents a date (year, month, and day) and time (hour, minute, second, etc.). Each <code class="calibre20">time.Time</code> value has a <code class="calibre20">Year</code> method that returns the year. The code below uses this method to print the current year:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0032-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">The <code class="calibre20">time.Now</code> function returns a new <code class="calibre20">Time</code> value for the current date and time, which we store in the <code class="calibre20">now</code> variable. Then, we call the <code class="calibre20">Year</code> method on the value that <code class="calibre20">now</code> refers to:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0032-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">The <code class="calibre20">Year</code> method returns an integer with the year, which we then print.</p>
<blockquote class="calibre37 pcalibre1 pcalibre2">
<p class="calibre38"><strong class="calibre8">Methods are functions that are associated with values of a particular type.</strong></p>
</blockquote>
<p class="calibre7"><a data-primary=". (dot operator)" data-see="dot operator (.)" data-type="indexterm" id="idm46062715158936" class="calibre10"/><a data-primary="dot operator (.)" data-secondary="about" data-type="indexterm" id="idm46062715157448" class="calibre10"/><a data-primary="NewReplacer function (strings)" data-type="indexterm" id="idm46062715156264" class="calibre10"/><a data-primary="Replace method (Replacer)" data-type="indexterm" id="idm46062715155464" class="calibre10"/><a data-primary="Replacer type (strings)" data-type="indexterm" id="idm46062715154664" class="calibre10"/><a data-primary="strings package" data-secondary="NewReplacer function" data-type="indexterm" id="idm46062715153832" class="calibre10"/><a data-primary="strings package" data-secondary="Replacer type" data-type="indexterm" id="idm46062715152712" class="calibre10"/>The <code class="calibre20">strings</code> package has a <code class="calibre20">Replacer</code> type that can search through a string for a substring, and replace each occurrence of that substring with another string. The code below replaces every <code class="calibre20">#</code> symbol in a string with the letter <code class="calibre20">o</code>:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0033-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">The <code class="calibre20">strings.NewReplacer</code> function takes arguments with a string to replace (<code class="calibre20">"#"</code>), and a string to replace it with (<code class="calibre20">"o"</code>), and returns a <code class="calibre20">strings.Replacer</code>. When we pass a string to the <code class="calibre20">Replacer</code> value’s <code class="calibre20">Replace</code> method, it returns a string with those replacements made.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0033-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><strong class="calibre8">The dot indicates that the thing on its right belongs to the thing on its left</strong>.</p>
<p class="calibre7">Whereas the functions we saw earlier belonged to a <em class="calibre9">package</em>, the methods belong to an individual <em class="calibre9">value</em>. That value is what appears to the left of the dot.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0033-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Making the grade" data-type="sect1" class="preface"><div class="preface" id="making_the_grade">
<h1 class="calibre25">Making the grade</h1>
<p class="calibre7"><a data-primary="/* */ (block comments)" data-type="indexterm" id="idm46062715137368" class="calibre10"/><a data-primary="// (comments)" data-type="indexterm" id="idm46062715136152" class="calibre10"/><a data-primary="block comments (/* */)" data-type="indexterm" id="idm46062715135320" class="calibre10"/><a data-primary="comments (//)" data-type="indexterm" id="idm46062715134488" class="calibre10"/><a data-primary="forward slashes (//)" data-type="indexterm" id="idm46062715133608" class="calibre10"/>In this chapter, we’re going to look at features of Go that let you decide whether to run some code or not, based on a condition. Let’s look at a situation where we might need that ability...</p>
<p class="calibre7">We need to write a program that allows a student to type in their percentage grade and tells them whether they passed or not. Passing or failing follows a simple formula: a grade of 60% or more is passing, and less than 60% is failing. So our program will need to give one response if the percentage users enter is 60 or greater, and a different response otherwise.</p>
</div></section>
<section data-pdf-bookmark="Comments" data-type="sect1" class="preface"><div class="preface" id="comments">
<h1 class="calibre25">Comments</h1>
<p class="calibre7">Let’s create a new file, <em class="calibre9">pass_fail.go</em>, to hold our program. We’re going to take care of a detail we omitted in our previous programs, and add a description of what the program does at the top.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0034-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Most Go programs include descriptions in their source code of what they do, intended for people maintaining the program to read. These <strong class="calibre8">comments</strong> are ignored by the compiler.</p>
<p class="calibre7">The most common form of comment is marked with two slash characters (<code class="calibre20">//</code>). Everything from the slashes to the end of the line is treated as part of the comment. A <code class="calibre20">//</code> comment can appear on a line by itself, or following a line of code.</p>
<pre data-type="programlisting" class="calibre32">// The total number of widgets in the system.
var TotalCount int // Can only be a whole number.</pre>
<p class="calibre7">The less frequently used form of comments, <strong class="calibre8">block comments</strong>, spans multiple lines. Block comments start with <code class="calibre20">/*</code> and end with <code class="calibre20">*/</code>, and everything between those markers (including newlines) is part of the comment.</p>
<pre data-type="programlisting" class="calibre32">/*
Package widget includes all the functions used
for processing widgets.
*/</pre>
</div></section>
<section data-pdf-bookmark="Getting a grade from the user" data-type="sect1" class="preface"><div class="preface" id="getting_a_grade_from_the_user">
<h1 class="calibre25">Getting a grade from the user</h1>
<p class="calibre7"><a data-primary="bufio package" data-secondary="NewReader function" data-type="indexterm" id="idm46062715119176" class="calibre10"/><a data-primary="bufio package" data-secondary="Reader type" data-type="indexterm" id="idm46062715117880" class="calibre10"/><a data-primary="bufio package" data-secondary="ReadString method" data-type="indexterm" id="idm46062715116728" class="calibre10"/><a data-primary="fmt package" data-secondary="Print function" data-type="indexterm" id="idm46062715115544" class="calibre10"/><a data-primary="keyboard, user input via" data-type="indexterm" id="idm46062715114472" class="calibre10"/><a data-primary="NewReader function (bufio)" data-type="indexterm" id="idm46062715113640" class="calibre10"/><a data-primary="Print function (fmt)" data-type="indexterm" id="idm46062715112872" class="calibre10"/><a data-primary="Reader type (bufio)" data-type="indexterm" id="idm46062715111992" class="calibre10"/><a data-primary="ReadString method (bufio)" data-type="indexterm" id="idm46062715111160" class="calibre10"/><a data-primary="user input" data-secondary="via keyboard" data-type="indexterm" id="idm46062715110360" class="calibre10"/>Now let’s add some actual code to our <em class="calibre9">pass_fail.go</em> program. The first thing it needs to do is allow the user to input a percentage grade. We want them to type a number and press Enter, and we’ll store the number they typed in a variable. Let’s add code to handle this. <em class="calibre9">(Note: this code will not actually compile as shown; we’ll talk about the reason in a moment!)</em></p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0035-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">First, we need to let the user know to enter something, so we use the <code class="calibre20">fmt.Print</code> function to display a prompt. (Unlike the <code class="calibre20">Println</code> function, <code class="calibre20">Print</code> doesn’t skip to a new terminal line after printing a message, which lets us keep the prompt and the user’s entry on the same line.)</p>
<p class="calibre7">Next, we need a way to read (receive and store) input from the program’s <em class="calibre9">standard input</em>, which all keyboard input goes to. The line <code class="calibre20">reader := bufio.NewReader(os.Stdin)</code> stores a <code class="calibre20">bufio.Reader</code> in the <code class="calibre20">reader</code> variable that can do that for us.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0035-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">To actually get the user’s input, we call the <code class="calibre20">ReadString</code> method on the <code class="calibre20">Reader</code>. The <code class="calibre20">ReadString</code> method requires an argument with a rune (character) that marks the end of the input. We want to read everything the user types up until they press Enter, so we give <code class="calibre20">ReadString</code> a newline rune.</p>
<p class="calibre7">Once we have the user input, we simply print it.</p>
<p class="calibre7">That’s the plan, anyway. But if we try to compile or run this program, we’ll get an error:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0035-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar" class="calibre30"><div class="sidebar" id="relax_2">
<h5 class="calibre31"><span class="calibre"><img alt="image" src="assets/cup.png" class="calibre4"/></span> Relax</h5>
<p class="calibre7"><strong class="calibre8">Don’t worry too much about the details of how <em class="calibre26">bufio.Reader</em> works.</strong></p>
<p class="calibre7">All you really need to know at this point is that it lets us read input from the keyboard.</p>
</div></aside>
</div></section>
<section data-pdf-bookmark="Multiple return values from a function or method" data-type="sect1" class="preface"><div class="preface" id="Multiple_return_values">
<h1 class="calibre25">Multiple return values from a function or method</h1>
<p class="calibre7"><a data-primary="declaring variables" data-secondary="compile errors" data-type="indexterm" id="idm46062715089048" class="calibre10"/><a data-primary="error handling" data-secondary="return values" data-type="indexterm" id="idm46062715087416" class="calibre10"/><a data-primary="methods" data-secondary="return values from" data-type="indexterm" id="idm46062715086312" class="calibre10"/><a data-primary="return values" data-secondary="error handling" data-type="indexterm" id="idm46062715085208" class="calibre10"/><a data-primary="return values" data-secondary="multiple" data-type="indexterm" id="idm46062715084104" class="calibre10"/><a data-primary="variables" data-secondary="compile errors" data-type="indexterm" id="idm46062715083000" class="calibre10"/>We’re trying to read the user’s keyboard input, but we’re getting an error. The compiler is reporting a problem in this line of code:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0036-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">The problem is that the <code class="calibre20">ReadString</code> method is trying to return <em class="calibre9">two</em> values, and we’ve only provided <em class="calibre9">one</em> variable to assign a value to.</p>
<p class="calibre7">In most programming languages, functions and methods can only have a single return value, but in Go, they can return any number of values. The most common use of multiple return values in Go is to return an additional error value that can be consulted to find out if anything went wrong while the function or method was running. A few examples:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0036-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><strong class="calibre8">Go doesn’t allow us to declare a variable unless we use it</strong>.</p>
<p class="calibre7">Go requires that every variable that gets <em class="calibre9">declared</em> must also get <em class="calibre9">used</em> somewhere in your program. If we add an <code class="calibre20">err</code> variable and then don’t check it, our code won’t compile. Unused variables often indicate a bug, so this is an example of Go helping you detect and fix bugs!</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0036-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Option 1: Ignore the error return value with the blank identifier" data-type="sect1" class="preface"><div class="preface" id="option_1colon_ignore_the_error_return_va">
<h1 class="calibre25">Option 1: Ignore the error return value with the blank identifier</h1>
<p class="calibre7"><a data-primary="blank identifier (_)" data-secondary="error return value and" data-type="indexterm" id="idm46062715069224" class="calibre10"/><a data-primary="declaring variables" data-secondary="short declarations" data-type="indexterm" id="idm46062715067592" class="calibre10"/><a data-primary="short variable declaration (:=)" data-secondary="blank identifier and" data-type="indexterm" id="idm46062715066536" class="calibre10"/><a data-primary="statements" data-secondary="assignment" data-type="indexterm" id="idm46062715065352" class="calibre10"/><a data-primary="variables" data-secondary="assigning values to" data-type="indexterm" id="idm46062715064280" class="calibre10"/><a data-primary="variables" data-secondary="declaring" data-type="indexterm" id="idm46062715063144" class="calibre10"/>The <code class="calibre20">ReadString</code> method returns a second value along with the user’s input, and we need to do something with that second value. We’ve tried just adding a second variable and ignoring it, but our code still won’t compile.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0037-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">When we have a value that would normally be assigned to a variable, but that we don’t intend to use, we can use Go’s <strong class="calibre8">blank identifier</strong>. Assigning a value to the blank identifier essentially discards it (while making it obvious to others reading your code that you are doing so). To use the blank identifier, simply type a single underscore ( <code class="calibre20">_</code> ) character in an assignment statement where you would normally type a variable name.</p>
<p class="calibre7">Let’s try using the blank identifier in place of our old <code class="calibre20">err</code> variable:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0037-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Now we’ll try the change out. In your terminal, change to the directory where you saved <em class="calibre9">pass_fail.go</em>, and run the program with:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0037-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">When you type a grade (or any other string) at the prompt and press Enter, your entry will be echoed back to you. Our program is working!</p>
</div></section>
<section data-pdf-bookmark="Option 2: Handle the error" data-type="sect1" class="preface"><div class="preface" id="option_2colon_handle_the_error">
<h1 class="calibre25">Option 2: Handle the error</h1>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0038-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><a data-primary="executing Go code" data-secondary="halting code execution" data-type="indexterm" id="idm46062715048008" class="calibre10"/><a data-primary="Fatal function (log)" data-type="indexterm" id="idm46062715046584" class="calibre10"/><a data-primary="Go programming language" data-secondary="halting code execution" data-type="indexterm" id="idm46062715045736" class="calibre10"/><a data-primary="halting code execution" data-type="indexterm" id="idm46062715044552" class="calibre10"/><a data-primary="log package" data-secondary="Fatal function" data-type="indexterm" id="idm46062715043720" class="calibre10"/><strong class="calibre8">That’s true. If an error actually occurred, this program wouldn’t tell us!</strong></p>
<p class="calibre7">If we got an error back from the <code class="calibre20">ReadString</code> method, the blank identifier would just cause the error to be ignored, and our program would proceed anyway, possibly with invalid data.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0038-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">In this case, it would be more appropriate to alert the user and stop the program if there was an error.</p>
<p class="calibre7">The <code class="calibre20">log</code> package has a <code class="calibre20">Fatal</code> function that can do both of these operations for us at once: log a message to the terminal <em class="calibre9">and</em> stop the program. (“Fatal” in this context means reporting an error that “kills” your program.)</p>
<p class="calibre7">Let’s get rid of the blank identifier and replace it with an <code class="calibre20">err</code> variable so that we’re recording the error again. Then, we’ll use the <code class="calibre20">Fatal</code> function to log the error and halt the program.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0038-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">But if we try running this updated program, we’ll see there’s a new problem...</p>
</div></section>
<section data-pdf-bookmark="Conditionals" data-type="sect1" class="preface"><div class="preface" id="conditionals">
<h1 class="calibre25">Conditionals</h1>
<p class="calibre7"><a data-primary="blocks of code" data-secondary="about" data-type="indexterm" id="idm46062715031064" class="calibre10"/><a data-primary="bool (Boolean value)" data-secondary="conditionals and" data-type="indexterm" id="idm46062715029784" class="calibre10"/><a data-primary="conditional statements" data-secondary="about" data-type="indexterm" id="idm46062715028696" class="calibre10"/><a data-primary="conditional statements" data-secondary="error handling" data-type="indexterm" id="idm46062715027560" class="calibre10"/><a data-primary="conditional statements" data-secondary="if/else statements" data-type="indexterm" id="idm46062715026456" class="calibre10"/><a data-primary="conditional statements" data-secondary="if statements" data-type="indexterm" id="idm46062715025352" class="calibre10"/><a data-primary="curly braces {}" data-secondary="blocks of code and" data-type="indexterm" id="idm46062715024248" class="calibre10"/><a data-primary="error handling" data-secondary="conditionals" data-type="indexterm" id="idm46062715023144" class="calibre10"/><a data-primary="functions" data-secondary="nil return value for" data-type="indexterm" id="idm46062715022040" class="calibre10"/><a data-primary="if/else statements" data-type="indexterm" id="idm46062715020936" class="calibre10"/><a data-primary="if statements" data-type="indexterm" id="idm46062715020104" class="calibre10"/><a data-primary="methods" data-secondary="nil value for" data-type="indexterm" id="idm46062715019272" class="calibre10"/><a data-primary="nil value" data-secondary="for functions" data-type="indexterm" id="idm46062715018168" class="calibre10"/><a data-primary="nil value" data-secondary="for methods" data-type="indexterm" id="idm46062715017064" class="calibre10"/>If our program encounters a problem reading input from the keyboard, we’ve set it up to report the error and stop running. But now, it stops running even when everything’s working correctly!</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0039-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Functions and methods like <code class="calibre20">ReadString</code> return an error value of <strong class="calibre8">nil</strong>, which basically means “there’s nothing there.” In other words, if <code class="calibre20">err</code> is <code class="calibre20">nil</code>, it means there was no error. But our program is set up to simply report the <code class="calibre20">nil</code> error! What we <em class="calibre9">should</em> do is exit the program only <em class="calibre9">if</em> the <code class="calibre20">err</code> variable has a value other than <code class="calibre20">nil</code>.</p>
<p class="calibre7">We can do this using <strong class="calibre8">conditionals</strong>: statements that cause a block of code (one or more statements surrounded by <code class="calibre20">{}</code> curly braces) to be executed only if a condition is met.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0039-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">An expression is evaluated, and if its result is <code class="calibre20">true</code>, the code in the conditional block body is executed. If it’s <code class="calibre20">false</code>, the conditional block is skipped.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0039-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">As with most other languages, Go supports multiple branches in the conditional. These statements take the form <code class="calibre20">if</code>...<code class="calibre20">else if</code>...<code class="calibre20">else</code>.</p>
<pre data-type="programlisting" class="calibre32">if grade == 100 {
       fmt.Println("Perfect!")
} else if grade &gt;= 60 {
       fmt.Println("You pass.")
} else {
       fmt.Println("You fail!")
}</pre>
<p class="calibre7"><a data-primary="|| logical operator" data-type="indexterm" id="idm46062714999400" class="calibre10"/><a data-primary="! logical operator" data-type="indexterm" id="idm46062714998504" class="calibre10"/><a data-primary="&amp;&amp; logical operator" data-type="indexterm" id="idm46062714997672" class="calibre10"/><a data-primary="boolean operators" data-type="indexterm" id="idm46062714996840" class="calibre10"/><a data-primary="go fmt command" data-type="indexterm" id="idm46062714996008" class="calibre10"/><a data-primary="logical operators" data-type="indexterm" id="idm46062714995176" class="calibre10"/><a data-primary="operators" data-secondary="boolean" data-type="indexterm" id="idm46062714994344" class="calibre10"/><a data-primary="operators" data-secondary="logical" data-type="indexterm" id="idm46062714993208" class="calibre10"/><a data-primary="parentheses ()" data-secondary="if statement and" data-type="indexterm" id="idm46062714992136" class="calibre10"/>Conditionals rely on a Boolean expression (one that evaluates to <code class="calibre20">true</code> or <code class="calibre20">false</code>) to decide whether the code they contain should be executed.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0040-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">When you need to execute code only if a condition is <em class="calibre9">false</em>, you can use <code class="calibre20">!</code>, the Boolean negation operator, which lets you take a <code class="calibre20">true</code> value and make it <code class="calibre20">false</code>, or a <code class="calibre20">false</code> value and make it <code class="calibre20">true</code>.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0040-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">If you want to run some code only if two conditions are <em class="calibre9">both</em> true, you can use the <code class="calibre20">&amp;&amp;</code> (“and”) operator. If you want it to run if <em class="calibre9">either</em> of two conditions is true, you can use the <code class="calibre20">||</code> (“or”) operator.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0040-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="there are no Dumb Questions" data-type="sect1" class="preface"><div class="preface" id="there_are_no_dumb_questions_2">
<h1 class="calibre25">there are no Dumb Questions</h1>
<p class="calibre7"><strong class="calibre8">Q: My other programming language requires that an <code class="calibre40"><strong class="calibre39">if</strong></code> statement’s condition be surrounded with parentheses. Doesn’t Go?</strong></p>
<p class="calibre7"><strong class="calibre8">A:</strong> No, and in fact the <code class="calibre20">go fmt</code> tool will remove any parentheses you add, unless you’re using them to set order of operations.</p>
<aside data-type="sidebar" epub:type="sidebar" class="calibre30"><div class="sidebar" id="exercise_3">
<h5 class="calibre31"><span class="calibre"><img alt="image" src="assets/common.png" class="calibre4"/></span> Exercise</h5>
<p class="calibre7">Because they’re in conditional blocks, only some of the <code class="calibre20">Println</code> calls in the code below will be executed. Write down what the output would be.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0041-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><span class="calibre"><img alt="image" src="assets/arrow.png" class="calibre4"/></span> Answers in <a data-type="xref" href="#exercise_solution_3" class="calibre10">“<span class="calibre"><img alt="image" src="assets/common.png" class="calibre4"/></span> Exercise Solution”</a>.</p>
</div></aside>
</div></section>
<section data-pdf-bookmark="Logging a fatal error, conditionally" data-type="sect1" class="preface"><div class="preface" id="logging_a_fatal_errorcomma_conditionally">
<h1 class="calibre25">Logging a fatal error, conditionally</h1>
<p class="calibre7"><a data-primary="conditional statements" data-secondary="error handling" data-type="indexterm" id="idm46062714965432" class="calibre10"/><a data-primary="error handling" data-secondary="conditionals" data-type="indexterm" id="idm46062714963944" class="calibre10"/><a data-primary="keyboard, user input via" data-type="indexterm" id="idm46062714962904" class="calibre10"/><a data-primary="user input" data-secondary="via keyboard" data-type="indexterm" id="idm46062714962024" class="calibre10"/>Our grading program is reporting an error and exiting, even if it reads input from the keyboard successfully.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0042-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">We know that if the value in our <code class="calibre20">err</code> variable is <code class="calibre20">nil</code>, it means reading from the keyboard was successful. Now that we know about <code class="calibre20">if</code> statements, let’s try updating our code to log an error and exit only if <code class="calibre20">err</code> is <em class="calibre9">not</em> <code class="calibre20">nil</code>.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0042-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">If we rerun our program, we’ll see that it’s working again. And now, if there are any errors when reading user input, we’ll see those as well!</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0042-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Code Magnets" data-type="sect1" class="preface"><div class="preface" id="code_magnets_2">
<h1 class="calibre25">Code Magnets</h1>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0018-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">A Go program that prints the size of a file is on the fridge. It calls the <code class="calibre20">os.Stat</code> function, which returns an <code class="calibre20">os.FileInfo</code> value, and possibly an error value. Then it calls the <code class="calibre20">Size</code> method on the <code class="calibre20">FileInfo</code> value to get the file size.</p>
<p class="calibre7">But the original program uses the <code class="calibre20">_</code> blank identifier to ignore the error value from <code class="calibre20">os.Stat</code>. If an error occurs (which could happen if the file doesn’t exist), this will cause the program to fail.</p>
<p class="calibre7">Reconstruct the extra code snippets to make a program that works just like the original one, but also checks for an error from <code class="calibre20">os.Stat</code>. If the error from <code class="calibre20">os.Stat</code> is not <code class="calibre20">nil</code>, the error should be reported, and the program should exit. Discard the magnet with the <code class="calibre20">_</code> blank identifier; it won’t be used in the finished program.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0043-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><span class="calibre"><img alt="image" src="assets/arrow.png" class="calibre4"/></span> Answers in <a data-type="xref" href="#code_magnets_solution_2" class="calibre10">“Code Magnets Solution”</a>.</p>
</div></section>
<section data-pdf-bookmark="Avoid shadowing names" data-type="sect1" class="preface"><div class="preface" id="avoid_shadowing_names">
<h1 class="calibre25">Avoid shadowing names</h1>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0044-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<pre data-type="programlisting" class="calibre32">fmt.Print("Enter a grade: ")
reader := bufio.NewReader(os.Stdin)
input, err := reader.ReadString('\n')
if err != nil {
       log.Fatal(err)
}</pre>
<p class="calibre7"><strong class="calibre8">Naming a variable <code class="calibre40"><strong class="calibre39">error</strong></code> would be a bad idea, because it would <span class="calibre21">shadow</span> the name of a type called <code class="calibre40"><strong class="calibre39">error</strong></code></strong>.</p>
<p class="calibre7"><a data-primary="append built-in function" data-type="indexterm" id="idm46062714929736" class="calibre10"/><a data-primary="declaring variables" data-secondary="shadowing names" data-type="indexterm" id="idm46062714928712" class="calibre10"/><a data-primary="functions" data-secondary="shadowing names" data-type="indexterm" id="idm46062714927736" class="calibre10"/><a data-primary="naming rules" data-secondary="shadowing names" data-type="indexterm" id="idm46062714926584" class="calibre10"/><a data-primary="package names" data-secondary="shadowing names" data-type="indexterm" id="idm46062714925432" class="calibre10"/><a data-primary="scope" data-secondary="shadowing names and" data-type="indexterm" id="idm46062714924312" class="calibre10"/><a data-primary="shadowing names" data-type="indexterm" id="idm46062714923160" class="calibre10"/><a data-primary="types" data-secondary="shadowing names" data-type="indexterm" id="idm46062714922328" class="calibre10"/><a data-primary="variables" data-secondary="shadowing names" data-type="indexterm" id="idm46062714921208" class="calibre10"/>When you declare a variable, you should make sure it doesn’t have the same name as any existing functions, packages, types, or other variables. If something by the same name exists in the enclosing scope (we’ll talk about scopes shortly), your variable will <strong class="calibre8">shadow</strong> it—that is, take precedence over it. And all too often, that’s a bad thing.</p>
<p class="calibre7">Here, we declare a variable named <code class="calibre20">int</code> that shadows a type name, a variable named <code class="calibre20">append</code> that shadows a built-in function name (we’ll see the <code class="calibre20">append</code> function in <a data-type="xref" href="ch06.html#appending_issuecolon_slices" class="calibre10">Chapter 6</a>), and a variable named <code class="calibre20">fmt</code> that shadows an imported package name. Those names are awkward, but they don’t cause any errors by themselves...</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0044-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0044-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><a data-primary="compiling Go code" data-type="indexterm" id="idm46062714912392" class="calibre10"/><a data-primary="error built-in type" data-type="indexterm" id="idm46062714911112" class="calibre10"/><a data-primary="Go programming language" data-secondary="compiling Go code" data-type="indexterm" id="idm46062714910232" class="calibre10"/>...But if we try to access the type, function, or package the variables are shadowing, we’ll get the value in the variable instead. In this case, it results in compile errors:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0045-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">To avoid confusion for yourself and your fellow developers, you should avoid shadowing names wherever possible. In this case, fixing the issue is as simple as choosing nonconflicting names for the variables:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0045-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">As we’ll see in <a data-type="xref" href="ch03.html#call_mecolon_functions" class="calibre10">Chapter 3</a>, Go has a built-in type named <code class="calibre20">error</code>. So that’s why, when declaring variables meant to hold errors, we’ve been naming them <code class="calibre20">err</code> instead of <code class="calibre20">error</code>—we want to avoid shadowing the name of the <code class="calibre20">error</code> type with our variable name.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0045-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">If you <em class="calibre9">do</em> name your variables <code class="calibre20">error</code>, your code will <em class="calibre9">probably</em> still work. That is, <em class="calibre9">until</em> you forget that the <code class="calibre20">error</code> type name is shadowed, you try to use the type, and you get the variable instead. Don’t take that chance; use the name <code class="calibre20">err</code> for your error variables!</p>
</div></section>
<section data-pdf-bookmark="Converting strings to numbers" data-type="sect1" class="preface"><div class="preface" id="converting_strings_to_numbers">
<h1 class="calibre25">Converting strings to numbers</h1>
<p class="calibre7"><a data-primary="conditional statements" data-secondary="if/else statements" data-type="indexterm" id="idm46062714893672" class="calibre10"/><a data-primary="conversions" data-secondary="strings to numbers" data-type="indexterm" id="idm46062714892392" class="calibre10"/><a data-primary="if/else statements" data-type="indexterm" id="idm46062714891320" class="calibre10"/><a data-primary="keyboard, user input via" data-type="indexterm" id="idm46062714890488" class="calibre10"/><a data-primary="\n (newline character)" data-type="indexterm" id="idm46062714889656" class="calibre10"/><a data-primary="newline character (\n)" data-type="indexterm" id="idm46062714888824" class="calibre10"/><a data-primary="numbers and numeric types" data-secondary="converting from strings" data-type="indexterm" id="idm46062714887992" class="calibre10"/><a data-primary="string type (strings)" data-secondary="converting to numbers" data-type="indexterm" id="idm46062714886872" class="calibre10"/><a data-primary="user input" data-secondary="via keyboard" data-type="indexterm" id="idm46062714885720" class="calibre10"/>Conditional statements will also let us evaluate the entered grade. Let’s add an <code class="calibre20">if</code>/<code class="calibre20">else</code> statement to determine whether the grade is passing or failing. If the entered percentage grade is 60 or greater, we’ll set the status to <code class="calibre20">"passing"</code>. Otherwise, we’ll set it to <code class="calibre20">"failing"</code>.</p>
<pre data-type="programlisting" class="calibre32">// package and import statements omitted
func main() {
       fmt.Print("Enter a grade: ")
       reader := bufio.NewReader(os.Stdin)
       input, err := reader.ReadString('\n')
       if err != nil {
              log.Fatal(err)
       }
       if input &gt;= 60 {
              status := "passing"
       } else {
              status := "failing"
       }
}</pre>
<p class="calibre7">In its current form, though, this gets us a compilation error.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0046-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Here’s the problem: input from the keyboard is read in as a string. Go can only compare numbers to other numbers; we can’t compare a number with a string. And there’s no direct type conversion from <code class="calibre20">string</code> to a number:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0046-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">We have a pair of issues to address here:</p>
<ul class="list_style_type_none">
<li class="calibre18"><p class="calibre7">The <code class="calibre20">input</code> string still has a newline character on the end, from when the user pressed the Enter key while entering it. We need to strip that off.</p></li>
<li class="calibre18"><p class="calibre7">The remainder of the string needs to be converted to a floating-point number.</p></li>
</ul>
<p class="calibre7"><a data-primary="bufio package" data-secondary="ReadString method" data-type="indexterm" id="idm46062714873912" class="calibre10"/><a data-primary="float64 type (floating-point number)" data-secondary="conversions with" data-type="indexterm" id="idm46062714872664" class="calibre10"/><a data-primary="functions" data-secondary="nil return value for" data-type="indexterm" id="idm46062714870728" class="calibre10"/><a data-primary="nil value" data-secondary="for functions" data-type="indexterm" id="idm46062714869544" class="calibre10"/><a data-primary="ParseFloat function (strconv)" data-type="indexterm" id="idm46062714868472" class="calibre10"/><a data-primary="ReadString method (bufio)" data-type="indexterm" id="idm46062714867640" class="calibre10"/><a data-primary="strconv package" data-secondary="ParseFloat function" data-type="indexterm" id="idm46062714866872" class="calibre10"/><a data-primary="strings package" data-secondary="TrimSpace function" data-type="indexterm" id="idm46062714865688" class="calibre10"/><a data-primary="\t (tab character)" data-type="indexterm" id="idm46062714864616" class="calibre10"/><a data-primary="TrimSpace function (strings)" data-type="indexterm" id="idm46062714863784" class="calibre10"/><a data-primary="whitespace characters" data-type="indexterm" id="idm46062714862952" class="calibre10"/>Removing the newline character from the end of the <code class="calibre20">input</code> string will be easy. The <code class="calibre20">strings</code> package has a <code class="calibre20">TrimSpace</code> function that will remove all whitespace characters (newlines, tabs, and regular spaces) from the start and end of a string.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0047-01a.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">So, we can get rid of the newline on <code class="calibre20">input</code> by passing it to <code class="calibre20">TrimSpace</code>, and assigning the return value back to the <code class="calibre20">input</code> variable.</p>
<pre data-type="programlisting" class="calibre32">input = strings.TrimSpace(input)</pre>
<p class="calibre7">All that should remain in the <code class="calibre20">input</code> string now is the number the user entered. We can use the <code class="calibre20">strconv</code> package’s <code class="calibre20">ParseFloat</code> function to convert it to a <code class="calibre20">float64</code> value.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0047-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">You pass <code class="calibre20">ParseFloat</code> a string that you want to convert to a number, as well as the number of bits of precision the result should have. Since we’re converting to a <code class="calibre20">float64</code> value, we pass the number <code class="calibre20">64</code>. (In addition to <code class="calibre20">float64</code>, Go offers a less precise <code class="calibre20">float32</code> type, but you shouldn’t use that unless you have a good reason.)</p>
<p class="calibre7"><code class="calibre20">ParseFloat</code> converts the string to a number, and returns it as a <code class="calibre20">float64</code> value. Like <code class="calibre20">ReadString</code>, it also has a second return value, an error, which will be <code class="calibre20">nil</code> unless there was some problem converting the string. (For example, a string that <em class="calibre9">can’t</em> be converted to a number. We don’t know of a numeric equivalent to <code class="calibre20">"hello"</code>...)</p>
<aside data-type="sidebar" epub:type="sidebar" class="calibre30"><div class="sidebar" id="relax_3">
<h5 class="calibre31"><span class="calibre"><img alt="image" src="assets/cup.png" class="calibre4"/></span> Relax</h5>
<p class="calibre7"><strong class="calibre8">This whole “bits of precision” thing isn’t that important right now.</strong></p>
<p class="calibre7">It’s basically just a measure of how much computer memory a floating-point number takes up. As long as you know that you want a <code class="calibre20">float64</code>, and so you should pass <code class="calibre20">64</code> as the second argument to <code class="calibre20">ParseFloat</code>, you’ll be fine.</p>
</div></aside>
<p class="calibre7">Let’s update <em class="calibre9">pass_fail.go</em> with calls to <code class="calibre20">TrimSpace</code> and <code class="calibre20">ParseFloat</code>:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0048-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">First, we add the appropriate packages to the <code class="calibre20">import</code> section. We add code to remove the newline character from the <code class="calibre20">input</code> string. Then we pass <code class="calibre20">input</code> to <code class="calibre20">ParseFloat</code>, and store the resulting <code class="calibre20">float64</code> value in a new variable, <code class="calibre20">grade</code>.</p>
<p class="calibre7">Just as we did with <code class="calibre20">ReadString</code>, we test whether <code class="calibre20">ParseFloat</code> returns an error value. If it does, we report it and stop the program.</p>
<p class="calibre7">Finally, we update the conditional statement to test the number in <code class="calibre20">grade</code>, rather than the string in <code class="calibre20">input</code>. That should fix the error stemming from comparing a string to a number.</p>
<p class="calibre7">If we try to run the updated program, we no longer get the <code class="calibre20">mismatched types string and int</code> error. So it looks like we’ve fixed that issue. But we’ve got a couple more errors to address. We’ll look at those next.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0048-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Blocks" data-type="sect1" class="preface"><div class="preface" id="blocks">
<h1 class="calibre25">Blocks</h1>
<p class="calibre7"><a data-primary="blocks of code" data-secondary="about" data-type="indexterm" id="idm46062714826680" class="calibre10"/><a data-primary="blocks of code" data-secondary="nesting" data-type="indexterm" id="idm46062714825240" class="calibre10"/><a data-primary="conditional statements" data-secondary="blocks of code in" data-type="indexterm" id="idm46062714824088" class="calibre10"/><a data-primary="curly braces {}" data-secondary="blocks of code and" data-type="indexterm" id="idm46062714822968" class="calibre10"/><a data-primary="functions" data-secondary="blocks of code in" data-type="indexterm" id="idm46062714821816" class="calibre10"/><a data-primary="nesting" data-secondary="blocks of code" data-type="indexterm" id="idm46062714820680" class="calibre10"/>We’ve converted the user’s grade input to a <code class="calibre20">float64</code> value, and added it to a conditional to determine if it’s passing or failing. But we’re getting a couple more compile errors:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0049-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">As we’ve seen previously, declaring a variable like <code class="calibre20">status</code> without using it afterward is an error in Go. It seems a little strange that we’re getting the error twice, but let’s disregard that for now. We’ll add a call to <code class="calibre20">Println</code> to print the percentage grade we were given, and the value of <code class="calibre20">status</code>.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0049-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">But now we get a <em class="calibre9">new</em> error, saying that the <code class="calibre20">status</code> variable is undefined when we attempt to use it in our <code class="calibre20">Println</code> statement! What’s going on?</p>
<p class="calibre7">Go code can be divided up into <strong class="calibre8">blocks</strong>, segments of code. Blocks are usually surrounded by curly braces (<code class="calibre20">{}</code>), although there are also blocks at the source code file and package levels. Blocks can be nested inside one another.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0049-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">The bodies of functions and conditionals are both blocks as well. Understanding this will be key to solving our problem with the <code class="calibre20">status</code> variable...</p>
</div></section>
<section data-pdf-bookmark="Blocks and variable scope" data-type="sect1" class="preface"><div class="preface" id="blocks_and_variable_scope">
<h1 class="calibre25">Blocks and variable scope</h1>
<p class="calibre7"><a data-primary="blocks of code" data-secondary="variable scope" data-type="indexterm" id="idm46062714804824" class="calibre10"/><a data-primary="conditional statements" data-secondary="if statements" data-type="indexterm" id="idm46062714803720" class="calibre10"/><a data-primary="declaring variables" data-secondary="scope and" data-type="indexterm" id="idm46062714802600" class="calibre10"/><a data-primary="functions" data-secondary="scope of" data-type="indexterm" id="idm46062714801448" class="calibre10"/><a data-primary="if statements" data-type="indexterm" id="idm46062714800312" class="calibre10"/><a data-primary="packages" data-secondary="scope of" data-type="indexterm" id="idm46062714799448" class="calibre10"/><a data-primary="scope" data-secondary="blocks of code and" data-type="indexterm" id="idm46062714798312" class="calibre10"/><a data-primary="scope" data-secondary="functions and" data-type="indexterm" id="idm46062714797240" class="calibre10"/><a data-primary="variables" data-secondary="scope of" data-type="indexterm" id="idm46062714796104" class="calibre10"/>Each variable you declare has a <strong class="calibre8">scope</strong>: a portion of your code that it’s “visible” within. A declared variable can be accessed anywhere within its scope, but if you try to access it outside that scope, you’ll get an error.</p>
<p class="calibre7">A variable’s scope consists of the block it’s declared in and any blocks nested within that block.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0050-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Here are the scopes of the variables in the code above:</p>
<ul class="list_style_type_none">
<li class="calibre18"><p class="calibre7">The scope of <code class="calibre20">packageVar</code> is the entire <code class="calibre20">main</code> package. You can access <code class="calibre20">packageVar</code> anywhere within any function you define in the package.</p></li>
<li class="calibre18"><p class="calibre7">The scope of <code class="calibre20">functionVar</code> is the entire function it’s declared in, including the <code class="calibre20">if</code> block nested within that function.</p></li>
<li class="calibre18"><p class="calibre7">The scope of <code class="calibre20">conditionalVar</code> is limited to the <code class="calibre20">if</code> block. When we try to access <code class="calibre20">conditionalVar</code> <em class="calibre9">after</em> the closing <code class="calibre20">}</code> brace of the <code class="calibre20">if</code> block, we’ll get an error saying that <code class="calibre20">conditionalVar</code> is undefined!</p></li>
</ul>
<p class="calibre7"><a data-primary="= assignment statement" data-type="indexterm" id="idm46062714783848" class="calibre10"/><a data-primary="assignment statement (=)" data-type="indexterm" id="idm46062714782472" class="calibre10"/><a data-primary="declaring variables" data-secondary="short declarations" data-type="indexterm" id="idm46062714781624" class="calibre10"/><a data-primary="short variable declaration (:=)" data-secondary="assignment statements and" data-type="indexterm" id="idm46062714780552" class="calibre10"/><a data-primary="statements" data-secondary="assignment" data-type="indexterm" id="idm46062714779432" class="calibre10"/><a data-primary="variables" data-secondary="assigning values to" data-type="indexterm" id="idm46062714778280" class="calibre10"/><a data-primary="variables" data-secondary="declaring" data-type="indexterm" id="idm46062714777208" class="calibre10"/>Now that we understand variable scope, we can explain why our <code class="calibre20">status</code> variable was undefined in the grading program. We declared <code class="calibre20">status</code> in our conditional blocks. (In fact, we declared it twice, since there are two separate blocks. That’s why we got two <code class="calibre20">status declared and not used</code> errors.) But then we tried to access <code class="calibre20">status</code> <em class="calibre9">outside</em> those blocks, where it was no longer in scope.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0051-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">The solution is to move the declaration of the <code class="calibre20">status</code> variable out of the conditional blocks, and up to the function block. Once we do that, the <code class="calibre20">status</code> variable will be in scope both within the nested conditional blocks <em class="calibre9">and</em> at the end of the function block.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0051-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar" class="calibre30"><div class="sidebar" id="watch_it_2">
<h5 class="calibre31"><span class="calibre"><img alt="image" src="assets/watch-it.png" class="calibre4"/></span> Watch it!</h5>
<p class="calibre7"><strong class="calibre8">Don’t forget to change the short variable declarations within the nested blocks to assignment statements!</strong></p>
<p class="calibre7"><em class="calibre9">If you don’t change both occurrences of <code class="calibre41">:=</code> to <code class="calibre41">=</code>, you’ll accidentally create new variables named <code class="calibre41">status</code> within the nested conditional blocks, which will then be out of scope at the end of the enclosing function block!</em></p>
</div></aside>
</div></section>
<section data-pdf-bookmark="We’ve finished the grading program!" data-type="sect1" class="preface"><div class="preface" id="weaposve_finished_the_grading_program">
<h1 class="calibre25">We’ve finished the grading program!</h1>
<p class="calibre7">That was it! Our <em class="calibre9">pass_fail.go</em> program is ready for action! Let’s take one more look at the complete code:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0052-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">You can try running the finished program as many times as you like. Enter a percentage grade under 60, and it will report a failing status. Enter a grade over 60, and it will report that it’s passing. Looks like everything’s working!</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0052-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar" class="calibre30"><div class="sidebar" id="exercise_4">
<h5 class="calibre31"><span class="calibre"><img alt="image" src="assets/common.png" class="calibre4"/></span> Exercise</h5>
<p class="calibre7">Some of the lines of code below will result in a compile error, because they refer to a variable that is out of scope. Cross out the lines that have errors.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0053-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><span class="calibre"><img alt="image" src="assets/arrow.png" class="calibre4"/></span> Answers in <a data-type="xref" href="#exercise_solution_4" class="calibre10">“<span class="calibre"><img alt="image" src="assets/common.png" class="calibre4"/></span> Exercise Solution”</a>.</p>
</div></aside>
</div></section>
<section data-pdf-bookmark="Only one variable in a short variable declaration has to be new" data-type="sect1" class="preface"><div class="preface" id="only_one_variable_in_a_short_variable_de">
<h1 class="calibre25">Only one variable in a short variable declaration has to be new</h1>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0054-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><a data-primary="= assignment statement" data-type="indexterm" id="idm46062714744328" class="calibre10"/><a data-primary="assignment statement (=)" data-type="indexterm" id="idm46062714743112" class="calibre10"/><a data-primary="declaring variables" data-secondary="re-assignment using short declarations" data-type="indexterm" id="idm46062714742296" class="calibre10"/><a data-primary="declaring variables" data-secondary="short declarations" data-type="indexterm" id="idm46062714741160" class="calibre10"/><a data-primary="short variable declaration (:=)" data-secondary="about" data-type="indexterm" id="idm46062714740056" class="calibre10"/><a data-primary="short variable declaration (:=)" data-secondary="assignment statements and" data-type="indexterm" id="idm46062714738984" class="calibre10"/><a data-primary="variables" data-secondary="assigning values to" data-type="indexterm" id="idm46062714737912" class="calibre10"/><a data-primary="variables" data-secondary="declaring" data-type="indexterm" id="idm46062714736840" class="calibre10"/>It’s true that when the same variable name is declared twice in the same scope, we get a compile error:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0054-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">But as long as at least one variable name in a short variable declaration is new, it’s allowed. The new variable names are treated as a declaration, and the existing names are treated as an assignment.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0054-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">There’s a reason for this special handling: a lot of Go functions return multiple values. It would be a pain if you had to declare all the variables separately just because you want to reuse one of them.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0054-04.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Instead, Go lets you use a short variable declaration for everything, even if for <em class="calibre9">one</em> of the variables, it’s actually an assignment.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0054-05.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Let’s build a game" data-type="sect1" class="preface"><div class="preface" id="letaposs_build_a_game">
<h1 class="calibre25">Let’s build a game</h1>
<p class="calibre7">We’re going to wrap up this chapter by building a simple game. If that sounds daunting, don’t worry; you’ve already learned most of the skills you’re going to need! Along the way, we’ll learn about <em class="calibre9">loops</em>, which will allow the player to take multiple turns.</p>
<p class="calibre7">Let’s look at everything we’ll need to do:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0055-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<div data-type="note" epub:type="note" class="calibre22"><h6 class="calibre23">Note</h6>
<p class="calibre7">This example debuted in Head First Ruby. (Another fine book that you should also buy!) It worked so well that we’re using it again here.</p>
</div>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0055-02.png" class="calibre4"/>
<h6 class="calibre5"><span class="calibre">Figure 2-1. </span>Gary Richardott Game Designer</h6>
</div></figure>
<p class="calibre7">Let’s create a new source file, named <em class="calibre9">guess.go</em>.</p>
<p class="calibre7">It looks like our first requirement is to generate a random number. Let’s get started!</p>
</div></section>
<section data-pdf-bookmark="Package names vs. import paths" data-type="sect1" class="preface"><div class="preface" id="package_names_vsdot_import_paths">
<h1 class="calibre25">Package names vs. import paths</h1>
<p class="calibre7"><a data-primary="import paths" data-secondary="package names vs." data-type="indexterm" id="idm46062714713784" class="calibre10"/><a data-primary="import statement" data-secondary="import paths vs. package names" data-type="indexterm" id="idm46062714712504" class="calibre10"/><a data-primary="Intn function (math/rand)" data-type="indexterm" id="idm46062714711432" class="calibre10"/><a data-primary="math/rand package" data-type="indexterm" id="idm46062714710600" class="calibre10"/><a data-primary="package names" data-secondary="import paths vs." data-type="indexterm" id="idm46062714709768" class="calibre10"/><a data-primary="random number generation" data-type="indexterm" id="idm46062714708696" class="calibre10"/>The <code class="calibre20">math/rand</code> package has a <code class="calibre20">Intn</code> function that can generate a random number for us, so we’ll need to import <code class="calibre20">math/rand</code>. Then we’ll call <code class="calibre20">rand.Intn</code> to generate the random number.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0056-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0056-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><strong class="calibre8">One is the package’s <span class="calibre21">import path</span>, and the other is the package’s <span class="calibre21">name</span></strong>.</p>
<p class="calibre7">When we say <code class="calibre20">math/rand</code> we’re referring to the package’s <em class="calibre9">import path</em>, not its <em class="calibre9">name</em>. An <strong class="calibre8">import path</strong> is just a unique string that identifies a package and that you use in an <code class="calibre20">import</code> statement. Once you’ve imported the package, you can refer to it by its package name.</p>
<p class="calibre7">For every package we’ve used so far, the import path has been identical to the package name. Here are a few examples:</p>
<table class="calibre11">
<thead class="calibre33">
<tr class="calibre13">
<th class="calibre34">Import path</th>
<th class="calibre34">Package name</th>
</tr>
</thead>
<tbody class="calibre12">
<tr class="calibre13">
<td class="calibre14"><code class="calibre36">"fmt"</code></td>
<td class="calibre14"><code class="calibre36">fmt</code></td>
</tr>
<tr class="calibre15">
<td class="calibre14"><code class="calibre36">"log"</code></td>
<td class="calibre14"><code class="calibre36">log</code></td>
</tr>
<tr class="calibre13">
<td class="calibre14"><code class="calibre36">"strings"</code></td>
<td class="calibre14"><code class="calibre36">strings</code></td>
</tr>
</tbody>
</table>
<p class="calibre7">But the import path and package name don’t have to be identical. Many Go packages fall into similar categories, like compression or complex math. So they’re grouped together under similar import path prefixes, such as <code class="calibre20">"archive/"</code> or <code class="calibre20">"math/"</code>. (Think of them as being similar to the paths of directories on your hard drive.)</p>
<table class="calibre11">
<thead class="calibre33">
<tr class="calibre13">
<th class="calibre34">Import path</th>
<th class="calibre34">Package name</th>
</tr>
</thead>
<tbody class="calibre12">
<tr class="calibre13">
<td class="calibre14"><code class="calibre36">"archive"</code></td>
<td class="calibre14"><code class="calibre36">archive</code></td>
</tr>
<tr class="calibre15">
<td class="calibre14"><code class="calibre36">"archive/tar"</code></td>
<td class="calibre14"><code class="calibre36">tar</code></td>
</tr>
<tr class="calibre13">
<td class="calibre14"><code class="calibre36">"archive/zip"</code></td>
<td class="calibre14"><code class="calibre36">zip</code></td>
</tr>
<tr class="calibre15">
<td class="calibre14"><code class="calibre36">"math"</code></td>
<td class="calibre14"><code class="calibre36">math</code></td>
</tr>
<tr class="calibre13">
<td class="calibre14"><code class="calibre36">"math/cmplx"</code></td>
<td class="calibre14"><code class="calibre36">cmplx</code></td>
</tr>
<tr class="calibre15">
<td class="calibre14"><code class="calibre36">"math/rand"</code></td>
<td class="calibre14"><code class="calibre36">rand</code></td>
</tr>
</tbody>
</table>
<p class="calibre7">The Go language doesn’t require that a package name have anything to do with its import path. But by convention, the last (or only) segment of the import path is also used as the package name. So if the import path is <code class="calibre20">"archive"</code>, the package name will be <code class="calibre20">archive</code>, and if the import path is <code class="calibre20">"archive/zip"</code>, the package name will be <code class="calibre20">zip</code>.</p>
<table class="calibre11">
<thead class="calibre33">
<tr class="calibre13">
<th class="calibre34">Import path</th>
<th class="calibre34">Package name</th>
</tr>
</thead>
<tbody class="calibre12">
<tr class="calibre13">
<td class="calibre14"><code class="calibre36">"<span class="calibre21">archive</span>"</code></td>
<td class="calibre14"><span class="calibre21">archive</span></td>
</tr>
<tr class="calibre15">
<td class="calibre14"><code class="calibre36">"archive/<span class="calibre21">tar</span>"</code></td>
<td class="calibre14"><span class="calibre21">tar</span></td>
</tr>
<tr class="calibre13">
<td class="calibre14"><code class="calibre36">"archive/<span class="calibre21">zip</span>"</code></td>
<td class="calibre14"><span class="calibre21">zip</span></td>
</tr>
<tr class="calibre15">
<td class="calibre14"><code class="calibre36">"<span class="calibre21">math</span>"</code></td>
<td class="calibre14"><span class="calibre21">math</span></td>
</tr>
<tr class="calibre13">
<td class="calibre14"><code class="calibre36">"math/<span class="calibre21">cmplx</span>"</code></td>
<td class="calibre14"><span class="calibre21">cmplx</span></td>
</tr>
<tr class="calibre15">
<td class="calibre14"><code class="calibre36">"math/<span class="calibre21">rand</span>"</code></td>
<td class="calibre14"><span class="calibre21">rand</span></td>
</tr>
</tbody>
</table>
<p class="calibre7">So, that’s why our <code class="calibre20">import</code> statement uses a path of <code class="calibre20">"math/rand"</code>, but our <code class="calibre20">main</code> function just uses the package name: <code class="calibre20">rand</code>.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0057-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Generating a random number" data-type="sect1" class="preface"><div class="preface" id="generating_a_random_number">
<h1 class="calibre25">Generating a random number</h1>
<p class="calibre7">Pass a number to <code class="calibre20">rand.Intn</code>, and it will return a random integer between <code class="calibre20">0</code> and the number you provided. In other words, if we pass an argument of <code class="calibre20">100</code>, we’ll get a random number in the range 0–99. Since we need a number in the range 1–100, we’ll just add <code class="calibre20">1</code> to whatever random value we get. We’ll store the result in a variable, <code class="calibre20">target</code>. We’ll do more with <code class="calibre20">target</code> later, but for now we’ll just print it.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0057-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">If we try running our program right now, we’ll get a random number. But we just get the <em class="calibre9">same</em> random number over and over! The problem is, random numbers generated by computers aren’t really that random. But there’s a way to increase that randomness...</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0057-04.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><a data-primary="Now function (time)" data-type="indexterm" id="idm46062714644232" class="calibre10"/><a data-primary="Seed function (math/rand)" data-type="indexterm" id="idm46062714642920" class="calibre10"/><a data-primary="time package" data-secondary="Now function" data-type="indexterm" id="idm46062714642152" class="calibre10"/><a data-primary="time package" data-secondary="Time type" data-type="indexterm" id="idm46062714641016" class="calibre10"/><a data-primary="Time type (time)" data-type="indexterm" id="idm46062714639944" class="calibre10"/>To get different random numbers, we need to pass a value to the <code class="calibre20">rand.Seed</code> function. That will “seed” the random number generator—that is, give it a value that it will use to generate other random values. But if we keep giving it the same seed value, it will keep giving us the same random values, and we’ll be back where we started.</p>
<p class="calibre7">We saw earlier that the <code class="calibre20">time.Now</code> function will give us a <code class="calibre20">Time</code> value representing the current date and time. We can use that to get a different seed value every time we run our program.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0058-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">The <code class="calibre20">rand.Seed</code> function expects an integer, so we can’t pass it a <code class="calibre20">Time</code> value directly. Instead, we call the <code class="calibre20">Unix</code> method on the <code class="calibre20">Time</code>, which will convert it to an integer. (Specifically, it will convert it to Unix time format, which is an integer with the number of seconds since January 1, 1970. But you don’t really need to remember that.) We pass that integer to <code class="calibre20">rand.Seed</code>.</p>
<p class="calibre7">We also add a couple <code class="calibre20">Println</code> calls to let the user know we’ve chosen a random number. But aside from that, we can leave the rest of our code, including the call to <code class="calibre20">rand.Intn</code>, as is. Seeding the generator should be the only change we need to make.</p>
<p class="calibre7">Now, each time we run our program, we’ll see our message, along with a random number. It looks like our changes are successful!</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0058-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Getting an integer from the keyboard" data-type="sect1" class="preface"><div class="preface" id="getting_an_integer_from_the_keyboard">
<h1 class="calibre25">Getting an integer from the keyboard</h1>
<p class="calibre7"><a data-primary="Atoi function (strconv)" data-type="indexterm" id="idm46062714626584" class="calibre10"/><a data-primary="conversions" data-secondary="strings to numbers" data-type="indexterm" id="idm46062714625416" class="calibre10"/><a data-primary="int type (integer)" data-secondary="conversions with" data-type="indexterm" id="idm46062714624312" class="calibre10"/><a data-primary="keyboard, user input via" data-type="indexterm" id="idm46062714623176" class="calibre10"/><a data-primary="numbers and numeric types" data-secondary="converting from strings" data-type="indexterm" id="idm46062714622408" class="calibre10"/><a data-primary="strconv package" data-secondary="Atoi function" data-type="indexterm" id="idm46062714621320" class="calibre10"/><a data-primary="string type (strings)" data-secondary="converting to numbers" data-type="indexterm" id="idm46062714620200" class="calibre10"/><a data-primary="user input" data-secondary="via keyboard" data-type="indexterm" id="idm46062714619048" class="calibre10"/>Our first requirement is complete! Next we need to get the user’s guess via the keyboard.</p>
<p class="calibre7">That should work in much the same way as when we read in a percentage grade from the keyboard for our grading program.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0059-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">There will be only one difference: instead of converting the input to a <code class="calibre20">float64</code>, we need to convert it to an <code class="calibre20">int</code> (since our guessing game uses only whole numbers). So we’ll pass the string read from the keyboard to the <code class="calibre20">strconv</code> package’s <code class="calibre20">Atoi</code> (string to integer) function instead of its <code class="calibre20">ParseFloat</code> function. <code class="calibre20">Atoi</code> will give us an integer as its return value. (Just like <code class="calibre20">ParseFloat</code>, <code class="calibre20">Atoi</code> might also give us an error if it can’t convert the string. If that happens, we again report the error and exit.)</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0059-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Comparing the guess to the target" data-type="sect1" class="preface"><div class="preface" id="comparing_the_guess_to_the_target">
<h1 class="calibre25">Comparing the guess to the target</h1>
<p class="calibre7"><a data-primary="comparisons, math operations and" data-type="indexterm" id="idm46062714607512" class="calibre10"/><a data-primary="math operations and comparisons" data-type="indexterm" id="idm46062714606344" class="calibre10"/><a data-primary="operations and comparisons (math)" data-type="indexterm" id="idm46062714605576" class="calibre10"/>Another requirement finished. And this next one will be easy... We just need to compare the user’s guess to the randomly generated number, and tell them whether it was higher or lower.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0060-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">If <code class="calibre20">guess</code> is less than <code class="calibre20">target</code>, we need to print a message saying the guess was low. <em class="calibre9">Otherwise, if</em> <code class="calibre20">guess</code> is greater than <code class="calibre20">target</code>, we should print a message saying the guess was high. Sounds like we need an <code class="calibre20">if</code>...<code class="calibre20">else if</code> statement. We’ll add it below the other code in our <code class="calibre20">main</code> function.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0060-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Now try running our updated program from the terminal. It’s still set up to print <code class="calibre20">target</code> each time it runs, which will be useful for debugging. Just enter a number lower than <code class="calibre20">target</code>, and you should be told your guess was low. If you rerun the program, you’ll get a new <code class="calibre20">target</code> value. Enter a number higher than that, and you’ll be told your guess was high.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0060-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Loops" data-type="sect1" class="preface"><div class="preface" id="loops">
<h1 class="calibre25">Loops</h1>
<p class="calibre7"><a data-primary="condition expressions in loops" data-type="indexterm" id="idm46062714590040" class="calibre10"/><a data-primary="for loops" data-secondary="about" data-type="indexterm" id="idm46062714588984" class="calibre10"/><a data-primary="initialization statements" data-type="indexterm" id="idm46062714587896" class="calibre10"/><a data-primary="loops" data-secondary="about" data-type="indexterm" id="idm46062714587064" class="calibre10"/><a data-primary="loops" data-secondary="condition expression" data-type="indexterm" id="idm46062714585928" class="calibre10"/><a data-primary="loops" data-secondary="for" data-type="indexterm" id="idm46062714584856" class="calibre10"/><a data-primary="loops" data-secondary="initialization statements" data-type="indexterm" id="idm46062714583720" class="calibre10"/><a data-primary="loops" data-secondary="post statements" data-type="indexterm" id="idm46062714582616" class="calibre10"/><a data-primary="post statements" data-type="indexterm" id="idm46062714581480" class="calibre10"/><a data-primary="statements" data-secondary="initialization" data-type="indexterm" id="idm46062714580680" class="calibre10"/><a data-primary="statements" data-secondary="in loops" data-type="indexterm" id="idm46062714579544" class="calibre10"/>Another requirement down! Let’s look at the next one.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0061-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Currently, the player only gets to guess once, but we need to allow them to guess up to 10 times.</p>
<p class="calibre7">The code to prompt for a guess is already in place. We just need to run it <em class="calibre9">more than once</em>. We can use a <strong class="calibre8">loop</strong> to execute a block of code repeatedly. If you’ve used other programming languages, you’ve probably encountered loops. When you need one or more statements executed over and over, you place them inside a loop.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0061-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Loops always begin with the <code class="calibre20">for</code> keyword. In one common kind of loop, <code class="calibre20">for</code> is followed by three segments of code that control the loop:</p>
<ul class="list_style_type_none">
<li class="calibre18"><p class="calibre7">An initialization (or init) statement that is usually used to initialize a variable</p></li>
<li class="calibre18"><p class="calibre7">A condition expression that determines when to break out of the loop</p></li>
<li class="calibre18"><p class="calibre7">A post statement that runs after each iteration of the loop</p></li>
</ul>
<p class="calibre7">Often, the initialization statement is used to initialize a variable, the condition expression keeps the loop running until that variable reaches a certain value, and the post statement is used to update the value of that variable. For example, in this snippet, the <code class="calibre20">t</code> variable is initialized to <code class="calibre20">3</code>, the condition keeps the loop going while <code class="calibre20">t &gt; 0</code>, and the post statement subtracts <code class="calibre20">1</code> from <code class="calibre20">t</code> each time the loop runs. Eventually, <code class="calibre20">t</code> reaches <code class="calibre20">0</code> and the loop ends.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0061-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><a data-primary="++ statement" data-type="indexterm" id="idm46062714562280" class="calibre10"/><a data-primary="+= assignment operator" data-type="indexterm" id="idm46062714561304" class="calibre10"/><a data-primary="-= assignment operator" data-type="indexterm" id="idm46062714560440" class="calibre10"/><a data-primary="-- statement" data-type="indexterm" id="idm46062714559608" class="calibre10"/><a data-primary="assignment operators" data-type="indexterm" id="idm46062714558776" class="calibre10"/><a data-primary="Ctrl+C keyboard shortcut" data-type="indexterm" id="idm46062714557944" class="calibre10"/><a data-primary="executing Go code" data-secondary="halting code execution" data-type="indexterm" id="idm46062714557112" class="calibre10"/><a data-primary="Go programming language" data-secondary="halting code execution" data-type="indexterm" id="idm46062714556040" class="calibre10"/><a data-primary="halting code execution" data-type="indexterm" id="idm46062714554904" class="calibre10"/><a data-primary="infinite loops" data-type="indexterm" id="idm46062714554104" class="calibre10"/><a data-primary="loops" data-secondary="infinite" data-type="indexterm" id="idm46062714553208" class="calibre10"/><a data-primary="operators" data-secondary="assignment" data-type="indexterm" id="idm46062714552168" class="calibre10"/>The <code class="calibre20">++</code> and <code class="calibre20">--</code> statements are frequently used in loop post statements. Each time they’re evaluated, <code class="calibre20">++</code> adds <code class="calibre20">1</code> to a variable’s value, and <code class="calibre20">--</code> subtracts <code class="calibre20">1</code>.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0062-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Used in a loop, <code class="calibre20">++</code> and <code class="calibre20">--</code> are convenient for counting up or down.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0062-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Go also includes the assignment operators <code class="calibre20">+=</code> and <code class="calibre20">-=</code>. They take the value in a variable, add or subtract another value, and then assign the result back to the variable.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0062-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><code class="calibre20">+=</code> and <code class="calibre20">-=</code> can be used in a loop to count in increments other than <code class="calibre20">1</code>.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0062-04.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">When the loop finishes, execution will resume with whatever statement follows the loop block. But the loop will keep going as long as the condition expression evaluates to <code class="calibre20">true</code>. It’s possible to abuse this; here are examples of a loop that will run forever, and a loop that will never run at all:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0062-05.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar" class="calibre30"><div class="sidebar" id="watch_it_3">
<h5 class="calibre31"><span class="calibre"><img alt="image" src="assets/watch-it.png" class="calibre4"/></span> Watch it!</h5>
<p class="calibre7"><strong class="calibre8">It’s possible for a loop to run forever, in which case your program will never stop on its own.</strong></p>
<p class="calibre7"><em class="calibre9">If this happens, with the terminal active, hold the Control key and press C to halt your program.</em></p>
</div></aside>
</div></section>
<section data-pdf-bookmark="Init and post statements are optional" data-type="sect1" class="preface"><div class="preface" id="init_and_post_statements_are_optional">
<h1 class="calibre25">Init and post statements are optional</h1>
<p class="calibre7"><a data-primary="condition expressions in loops" data-type="indexterm" id="idm46062714529048" class="calibre10"/><a data-primary="for loops" data-secondary="scope and" data-type="indexterm" id="idm46062714527176" class="calibre10"/><a data-primary="initialization statements" data-type="indexterm" id="idm46062714526040" class="calibre10"/><a data-primary="loops" data-secondary="condition expression" data-type="indexterm" id="idm46062714525240" class="calibre10"/><a data-primary="loops" data-secondary="initialization statements" data-type="indexterm" id="idm46062714524104" class="calibre10"/><a data-primary="loops" data-secondary="scope and" data-type="indexterm" id="idm46062714523128" class="calibre10"/><a data-primary="scope" data-secondary="loops and" data-type="indexterm" id="idm46062714521944" class="calibre10"/><a data-primary="statements" data-secondary="initialization" data-type="indexterm" id="idm46062714520872" class="calibre10"/>If you want, you can leave out the init and post statements from a <code class="calibre20">for</code> loop, leaving only the condition expression (although you still need to make sure the condition eventually evaluates to <code class="calibre20">false</code>, or you could have an infinite loop on your hands).</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0063-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Loops and scope" data-type="sect1" class="preface"><div class="preface" id="loops_and_scope">
<h1 class="calibre25">Loops and scope</h1>
<p class="calibre7">Just like with conditionals, the scope of any variables declared within a loop’s block is limited to that block (although the init statement, condition expression, and post statement can be considered part of that scope as well).</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0063-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Also as with conditionals, any variable declared <em class="calibre9">before</em> the loop will still be in scope within the loop’s control statements and block, <em class="calibre9">and</em> will still be in scope after the loop exits.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0063-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Breaking Stuff is Educational!" data-type="sect1" class="preface"><div class="preface" id="breaking_stuff_is_educational_3">
<h1 class="calibre25">Breaking Stuff is Educational!</h1>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0006-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><a data-primary="loops" data-secondary="mistakes in initialization" data-type="indexterm" id="idm46062714505944" class="calibre10"/>Here’s a program that uses a loop to count to 3. Try making one of the changes below and run it. Then undo your change and try the next one. See what happens!</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0064-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<table class="calibre11">
<thead class="calibre33">
<tr class="calibre13">
<th class="calibre34">If you do this...</th>
<th class="calibre34">...it will break because...</th>
</tr>
</thead>
<tbody class="calibre12">
<tr class="calibre13">
<td class="calibre14">Add parentheses after the <code class="calibre36">for</code> keyword<br class="calibre16"/>
<code class="calibre36">for (x := 1; x &lt;= 3; x++)</code></td>
<td class="calibre14">Some other languages <em class="calibre9">require</em> parentheses around a <code class="calibre36">for</code> loop’s control statements, but not only does Go not require them, it doesn’t <em class="calibre9">allow</em> them.</td>
</tr>
<tr class="calibre15">
<td class="calibre14">Delete the <code class="calibre36">:</code> from the init statement<br class="calibre16"/><code class="calibre36">x = 1</code></td>
<td class="calibre14">Unless you’re assigning to a variable that’s already been declared in the enclosing scope (which you usually won’t be), the init statement needs to be a <em class="calibre9">declaration</em>, not an <em class="calibre9">assignment.</em></td>
</tr>
<tr class="calibre13">
<td class="calibre14">Remove the <code class="calibre36">=</code> from the condition expression<br class="calibre16"/><code class="calibre36">x &lt; 3</code></td>
<td class="calibre14">The expression <code class="calibre36">x &lt; 3</code> becomes <code class="calibre36">false</code> when <code class="calibre36">x</code> reaches <code class="calibre36">3</code> (whereas <code class="calibre36">x &lt;= 3</code> would still be <code class="calibre36">true</code>). So the loop would only count to <code class="calibre36">2</code>.</td>
</tr>
<tr class="calibre15">
<td class="calibre14">Reverse the comparison in the condition expression<br class="calibre16"/><code class="calibre36">x &gt;= 3</code></td>
<td class="calibre14">Because the condition is already <code class="calibre36">false</code> when the loop begins (<code class="calibre36">x</code> is initialized to <code class="calibre36">1</code>, which is <em class="calibre9">less</em> than <code class="calibre36">3</code>), the loop will never run.</td>
</tr>
<tr class="calibre13">
<td class="calibre14">Change the post statement from <code class="calibre36">x++</code> to <code class="calibre36">x--</code><br class="calibre16"/><code class="calibre36">x--</code></td>
<td class="calibre14">The <code class="calibre36">x</code> variable will start counting <em class="calibre9">down</em> from <code class="calibre36">1</code> (<code class="calibre36">1</code>, <code class="calibre36">0</code>, <code class="calibre36">-1</code>, <code class="calibre36">-2</code>, etc.), and since it will never be greater than <code class="calibre36">3</code>, the loop will never end.</td>
</tr>
<tr class="calibre15">
<td class="calibre14">Move the <code class="calibre36">fmt.Println(x)</code> statement outside the loop’s block</td>
<td class="calibre14">Variables declared in the init statement or within the loop block are only in scope within the loop block.</td>
</tr>
</tbody>
</table>
<aside data-type="sidebar" epub:type="sidebar" class="calibre30"><div class="sidebar" id="exercise_5">
<h5 class="calibre31"><span class="calibre"><img alt="image" src="assets/common.png" class="calibre4"/></span> Exercise</h5>
<p class="calibre7">Look carefully at the init statement, condition expression, and post statement for each of these loops. Then write what you think the output will be for each one.</p>
<div data-type="note" epub:type="note" class="calibre42"><h6 class="calibre23">Note</h6>
<p class="calibre7">(We’ve done the first one for you.)</p>
</div>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0065-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><span class="calibre"><img alt="image" src="assets/arrow.png" class="calibre4"/></span> Answers in <a data-type="xref" href="#exercise_solution_5" class="calibre10">“<span class="calibre"><img alt="image" src="assets/common.png" class="calibre4"/></span> Exercise Solution”</a>.</p>
</div></aside>
</div></section>
<section data-pdf-bookmark="Using a loop in our guessing game" data-type="sect1" class="preface"><div class="preface" id="using_a_loop_in_our_guessing_game">
<h1 class="calibre25">Using a loop in our guessing game</h1>
<p class="calibre7"><a data-primary="loops" data-secondary="about" data-type="indexterm" id="idm46062714464504" class="calibre10"/>Our game still only prompts the user for a guess once. Let’s add a loop around the code that prompts the user for a guess and tells them if it was low or high, so that the user can guess 10 times.</p>
<p class="calibre7">We’ll use an <code class="calibre20">int</code> variable named <code class="calibre20">guesses</code> to track the number of guesses the player has made. In our loop’s init statement, we’ll initialize <code class="calibre20">guesses</code> to <code class="calibre20">0</code>. We’ll add <code class="calibre20">1</code> to <code class="calibre20">guesses</code> with each iteration of the loop, and we’ll stop the loop when <code class="calibre20">guesses</code> reaches <code class="calibre20">10</code>.</p>
<p class="calibre7">We’ll also add a <code class="calibre20">Println</code> statement at the top of the loop’s block to tell the user how many guesses they have left.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0066-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Now that our loop is in place, if we run our game again, we’ll get asked 10 times what our guess is!</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0067-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Since the code to prompt for a guess and state whether it was high or low is inside the loop, it gets run repeatedly. After 10 guesses, the loop (and the game) will end.</p>
<p class="calibre7">But the loop always runs 10 times, even if the player guesses correctly! Fixing that will be our next requirement.</p>
</div></section>
<section data-pdf-bookmark="Skipping parts of a loop with “continue” and “break”" data-type="sect1" class="preface"><div class="preface" id="skipping_parts_of_a_loop_with">
<h1 class="calibre25">Skipping parts of a loop with “continue” and “break”</h1>
<p class="calibre7"><a data-primary="break keyword" data-type="indexterm" id="idm46062714451960" class="calibre10"/><a data-primary="continue keyword" data-type="indexterm" id="idm46062714449528" class="calibre10"/><a data-primary="loops" data-secondary="controlling flow of" data-type="indexterm" id="idm46062714448648" class="calibre10"/>The hard part is done! We only have a couple requirements left to go.</p>
<p class="calibre7">Right now, the loop that prompts the user for a guess always runs 10 times. Even if the player guesses correctly, we don’t tell them so, and we don’t stop the loop. Our next task is to fix that.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0068-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Go provides two keywords that control the flow of a loop. The first, <code class="calibre20">continue</code>, immediately skips to the next iteration of a loop, without running any further code in the loop block.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0068-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">In the above example, the string <code class="calibre20">"after continue"</code> never gets printed, because the <code class="calibre20">continue</code> keyword always skips back to the top of the loop before the second call to <code class="calibre20">Println</code> can be run.</p>
<p class="calibre7">The second keyword, <code class="calibre20">break</code>, immediately breaks out of a loop. No further code within the loop block is executed, and no further iterations are run. Execution moves to the first statement following the loop.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0068-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Here, in the first iteration of the loop, the string <code class="calibre20">"before break"</code> gets printed, but then the <code class="calibre20">break</code> statement immediately breaks out of the loop, without printing the <code class="calibre20">"after break"</code> string, and without running the loop again (even though it normally would have run two more times). Execution instead moves to the statement following the loop.</p>
<p class="calibre7">The <code class="calibre20">break</code> keyword seems like it would be applicable to our current problem: we need to break out of our loop when the player guesses correctly. Let’s try using it in our game...</p>
</div></section>
<section data-pdf-bookmark="Breaking out of our guessing loop" data-type="sect1" class="preface"><div class="preface" id="breaking_out_of_our_guessing_loop">
<h1 class="calibre25">Breaking out of our guessing loop</h1>
<p class="calibre7"><a data-primary="conditional statements" data-secondary="if/else statements" data-type="indexterm" id="idm46062714433656" class="calibre10"/><a data-primary="if/else statements" data-type="indexterm" id="idm46062714431320" class="calibre10"/><a data-primary="loops" data-secondary="breaking out of" data-type="indexterm" id="idm46062714430216" class="calibre10"/>We’re using an <code class="calibre20">if</code>...<code class="calibre20">else if</code> conditional to tell the player the status of their guess. If the player guesses a number too high or too low, we currently print a message telling them so.</p>
<p class="calibre7">It stands to reason that if the guess is neither too high <em class="calibre9">nor</em> too low, it must be correct. So let’s add an <code class="calibre20">else</code> branch onto the conditional, that will run in the event of a correct guess. Inside the block for the <code class="calibre20">else</code> branch, we’ll tell the player they were right, and then use the <code class="calibre20">break</code> statement to stop the guessing loop.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0069-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Now, when the player guesses correctly, they’ll see a congratulatory message, and the loop will exit without repeating the full 10 times.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0069-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">That’s another requirement complete!</p>
</div></section>
<section data-pdf-bookmark="Revealing the target" data-type="sect1" class="preface"><div class="preface" id="Revealing_the_target">
<h1 class="calibre25">Revealing the target</h1>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0070-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">We’re <em class="calibre9">so</em> close! Just one more requirement left!</p>
<p class="calibre7">If the player makes 10 guesses without finding the target number, the loop will exit. In that event, we need to print a message saying they lost, and tell them what the target was.</p>
<p class="calibre7">But we <em class="calibre9">also</em> exit the loop if the player guesses correctly. We don’t want to say the player has lost when they’ve already won!</p>
<p class="calibre7">So, before our guessing loop, we’ll declare a <code class="calibre20">success</code> variable that holds a <code class="calibre20">bool</code>. (We need to declare it <em class="calibre9">before</em> the loop so that it’s still in scope after the loop ends.) We’ll initialize <code class="calibre20">success</code> to a default value of <code class="calibre20">false</code>. Then, if the player guesses correctly, we’ll set <code class="calibre20">success</code> to <code class="calibre20">true</code>, indicating we don’t need to print the failure message.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0070-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">After the loop, we add an <code class="calibre20">if</code> block that prints the failure message. But an <code class="calibre20">if</code> block only runs if its condition evaluates to <code class="calibre20">true</code>, and we only want to print the failure message if <code class="calibre20">success</code> is <code class="calibre20">false</code>. So we add the Boolean negation operator (<code class="calibre20">!</code>). As we saw earlier, <code class="calibre20">!</code> turns <code class="calibre20">true</code> values <code class="calibre20">false</code> and <code class="calibre20">false</code> values <code class="calibre20">true</code>.</p>
<p class="calibre7">The result is that the failure message will be printed if <code class="calibre20">success</code> is <code class="calibre20">false</code>, but <em class="calibre9">won’t</em> be printed if <code class="calibre20">success</code> is <code class="calibre20">true</code>.</p>
</div></section>
<section data-pdf-bookmark="The finishing touches" data-type="sect1" class="preface"><div class="preface" id="The_finishing_touches">
<h1 class="calibre25">The finishing touches</h1>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0071-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><a data-primary="comments (//)" data-type="indexterm" id="idm46062714397416" class="calibre10"/>Congratulations, that’s the last requirement!</p>
<p class="calibre7">Let’s take care of a couple final issues with our code, and then try out our game!</p>
<p class="calibre7">First, as we mentioned, it’s typical to add a comment at the top of each Go program describing what it does. Let’s add one now.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0071-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Our program is also encouraging cheaters by printing the target number at the start of every game. Let’s remove the <code class="calibre20">Println</code> call that does that.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0071-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">We’re finally ready to try running our complete code!</p>
<p class="calibre7">First, we’ll run out of guesses on purpose to ensure the target number gets displayed...</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0071-04.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Then we’ll try guessing successfully.</p>
<p class="calibre7">Our game is working great!</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0071-05.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Congratulations, your game is complete!" data-type="sect1" class="preface"><div class="preface" id="congratulationscomma_your_game">
<h1 class="calibre25">Congratulations, your game is complete!</h1>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0072-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Using conditionals and loops, you’ve written a complete game in Go! Pour yourself a cold drink—you’ve earned it!</p>
<blockquote class="calibre37 pcalibre1 pcalibre2">
<p class="calibre38"><strong class="calibre8">Here’s our complete guess.go source code!</strong></p>
</blockquote>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0073-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Your Go Toolbox" data-type="sect1" class="preface"><div class="preface" id="your_go_toolbox_2">
<h1 class="calibre25">Your Go Toolbox</h1>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0074-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><strong class="calibre8">That’s it for <a data-type="xref" href="#which_code_runs_nextquestcolon_condition" class="calibre10">Chapter 2</a>! You’ve added conditionals and loops to your toolbox</strong>.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0074-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<div data-type="note" epub:type="note" class="calibre22"><h6 class="calibre23">Note</h6>
<p class="calibre7"><strong class="calibre8">Loops</strong></p>
<p class="calibre7">Loops cause a block of code to execute repeatedly.</p>
<p class="calibre7">One common kind of loop starts with the keyword “for”, followed by an init statement that initializes a variable, a condition expression that determines when to break out of the loop, and a post statement that runs after each iteration of the loop.</p>
</div>
<aside data-type="sidebar" epub:type="sidebar" class="calibre30"><div class="sidebar" id="bullet_point_2">
<h5 class="calibre31">Bullet Points</h5>
<ul class="list_style_type_none">
<li class="calibre18"><p class="calibre7">A <strong class="calibre8">method</strong> is a kind of function that’s associated with values of a given type.</p></li>
<li class="calibre18"><p class="calibre7">Go treats everything from a <code class="calibre20">//</code> marker to the end of the line as a <strong class="calibre8">comment</strong>—and ignores it.</p></li>
<li class="calibre18"><p class="calibre7">Multiline comments start with <code class="calibre20">/*</code> and end with <code class="calibre20">*/</code>. Everything in between, including newlines, is ignored.</p></li>
<li class="calibre18"><p class="calibre7">It’s conventional to include a comment at the top of every program, explaining what it does.</p></li>
<li class="calibre18"><p class="calibre7">Unlike most programming languages, Go allows <em class="calibre9">multiple</em> return values from a function or method call.</p></li>
<li class="calibre18"><p class="calibre7">One common use of multiple return values is to return the function’s main result, and then a second value indicating whether there was an error.</p></li>
<li class="calibre18"><p class="calibre7">To discard a value without using it, use the <code class="calibre20">_</code> <strong class="calibre8">blank identifier</strong>. The blank identifier can be used in place of any variable in any assignment statement.</p></li>
<li class="calibre18"><p class="calibre7">Avoid giving variables the same name as types, functions, or packages; it causes the variable to <strong class="calibre8">shadow</strong> (override) the item with the same name.</p></li>
<li class="calibre18"><p class="calibre7">Functions, conditionals, and loops all have <strong class="calibre8">blocks</strong> of code that appear within <code class="calibre20">{}</code> braces.</p></li>
<li class="calibre18"><p class="calibre7">Their code doesn’t appear within <code class="calibre20">{}</code> braces, but files and packages also comprise blocks.</p></li>
<li class="calibre18"><p class="calibre7">The <strong class="calibre8">scope</strong> of a variable is limited to the block it is defined within, and all blocks nested within that block.</p></li>
<li class="calibre18"><p class="calibre7">In addition to a name, a package may have an <strong class="calibre8">import path</strong> that is required when it is imported.</p></li>
<li class="calibre18"><p class="calibre7">The <code class="calibre20">continue</code> keyword skips to the next iteration of a loop.</p></li>
<li class="calibre18"><p class="calibre7">The <code class="calibre20">break</code> keyword exits out of a loop entirely.</p></li>
</ul>
</div></aside>
<aside data-type="sidebar" epub:type="sidebar" class="calibre30"><div class="sidebar" id="exercise_solution_3">
<h5 class="calibre31"><span class="calibre"><img alt="image" src="assets/common.png" class="calibre4"/></span> Exercise Solution</h5>
<p class="calibre7">Because they’re in conditional blocks, only some of the <code class="calibre20">Println</code> calls in the code below will be executed. Write down what the output would be.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0075-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></aside>
</div></section>
<section data-pdf-bookmark="Code Magnets Solution" data-type="sect1" class="preface"><div class="preface" id="code_magnets_solution_2">
<h1 class="calibre25">Code Magnets Solution</h1>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/bag.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">A Go program that prints the size of a file is on the fridge. It calls the <code class="calibre20">os.Stat</code> function, which returns an <code class="calibre20">os.FileInfo</code> value, and possibly an error. Then it calls the <code class="calibre20">Size</code> method on the <code class="calibre20">FileInfo</code> value to get the file size.</p>
<p class="calibre7">The original program used the <code class="calibre20">_</code> blank identifier to ignore the error value from <code class="calibre20">os.Stat</code>. If an error occurred (which could happen if the file doesn’t exist), this would cause the program to fail.</p>
<p class="calibre7">Your job was to reconstruct the extra code snippets to make a program that works just like the original one, but also checks for an error from <code class="calibre20">os.Stat</code>. If the error from <code class="calibre20">os.Stat</code> is not <code class="calibre20">nil</code>, the error should be reported, and the program should exit.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0076-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar" class="calibre30"><div class="sidebar" id="exercise_solution_4">
<h5 class="calibre31"><span class="calibre"><img alt="image" src="assets/common.png" class="calibre4"/></span> Exercise Solution</h5>
<p class="calibre7">Some of the lines of code below will result in a compile error, because they refer to a variable that is out of scope. Cross out the lines that have errors.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0077-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></aside>
<aside data-type="sidebar" epub:type="sidebar" class="calibre30"><div class="sidebar" id="exercise_solution_5">
<h5 class="calibre31"><span class="calibre"><img alt="image" src="assets/common.png" class="calibre4"/></span> Exercise Solution</h5>
<p class="calibre7">Look carefully at the init statement, condition expression, and post statement for each of these loops. Then write what you think the output will be for each one.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0078-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></aside>
</div></section>
</div></section></body></html>