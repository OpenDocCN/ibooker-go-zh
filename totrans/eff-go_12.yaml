- en: Appendix A. Latencies for Napkin Math Calculations
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: For designing and assessing optimizations on a different level, it’s useful
    to be able to approximate and ballpark latency numbers for basic operations we
    see in interactions with the computer.
  prefs: []
  type: TYPE_NORMAL
- en: It’s good to remember some of those numbers, but if you don’t, I prepared a
    small table with the approximate, rounded, average latencies in [Table A-1](#table-napkin-math).
    It is heavily inspired by [Simon Eskildsen’s napkin-math repository](https://oreil.ly/yXLnn),
    with a few modifications.
  prefs: []
  type: TYPE_NORMAL
- en: The repository was created in 2021\. For CPU-based operations, those numbers
    are based on the server x86 CPU from the Xeon family. Note that things are still
    improving every year, however, most of the numbers are stable since 2005, due
    to limitations explained in [“Hardware Is Getting Faster and Cheaper”](ch01.html#ch-eff-s-hardware).
    CPU-related latencies might be also different across various CPU architectures
    (e.g. ARM).
  prefs: []
  type: TYPE_NORMAL
- en: Table A-1\. CPU-related latencies
  prefs: []
  type: TYPE_NORMAL
- en: '| Operation | Latency | Throughput |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| 3 Ghz CPU clock cycle | 0.3 ns | N/A |'
  prefs: []
  type: TYPE_TB
- en: '| CPU register access | 0.3 ns (1 cycle) | N/A |'
  prefs: []
  type: TYPE_TB
- en: '| CPU L1 cache access | 0.9 ns (3 cycles) | N/A |'
  prefs: []
  type: TYPE_TB
- en: '| CPU L2 cache access | 3ns | N/A |'
  prefs: []
  type: TYPE_TB
- en: '| Sequential memory R/W (64 bytes) | 5 ns | 10 GBps |'
  prefs: []
  type: TYPE_TB
- en: '| CPU L3 cache access | 20 ns | N/A |'
  prefs: []
  type: TYPE_TB
- en: '| Hashing, not crypto-safe (64 bytes) | 25 ns | 2 GBps |'
  prefs: []
  type: TYPE_TB
- en: '| Random memory R/W (64 bytes) | 50 ns | 1 GBps |'
  prefs: []
  type: TYPE_TB
- en: '| Mutex lock/unlock | 17 ns | N/A |'
  prefs: []
  type: TYPE_TB
- en: '| System call | 500 ns | N/A |'
  prefs: []
  type: TYPE_TB
- en: '| Hashing, crypto-safe (64 bytes) | 500 ns | 200 MBps |'
  prefs: []
  type: TYPE_TB
- en: '| Sequential SSD read (8 KB) | 1 μs | 4 GBps |'
  prefs: []
  type: TYPE_TB
- en: '| Context switch | 10 μs | N/A |'
  prefs: []
  type: TYPE_TB
- en: '| Sequential SSD write, -fsync (8KB) | 10 μs | 1 GBps |'
  prefs: []
  type: TYPE_TB
- en: '| TCP echo server (32 KiB) | 10 μs | 4 GBps |'
  prefs: []
  type: TYPE_TB
- en: '| Sequential SSD write, +fsync (8KB) | 1 ms | 10 MBps |'
  prefs: []
  type: TYPE_TB
- en: '| Sorting (64-bit integers) | N/A | 200 MBps |'
  prefs: []
  type: TYPE_TB
- en: '| Random SSD seek (8 KiB) | 100 μs | 70 MBps |'
  prefs: []
  type: TYPE_TB
- en: '| Compression | N/A | 100 MBps |'
  prefs: []
  type: TYPE_TB
- en: '| Decompression | N/A | 200 MBps |'
  prefs: []
  type: TYPE_TB
- en: '| Proxy: Envoy/ProxySQL/NGINX/HAProxy | 50 μs | ? |'
  prefs: []
  type: TYPE_TB
- en: '| Network within same region | 250 μs | 100 MBps |'
  prefs: []
  type: TYPE_TB
- en: '| MySQL, memcached, Redis query | 500 μs | ? |'
  prefs: []
  type: TYPE_TB
- en: '| Random HDD Seek (8 KB) | 10 ms | 0.7 MBps |'
  prefs: []
  type: TYPE_TB
- en: '| Network NA East ↔ West | 60 ms | 25 MBps |'
  prefs: []
  type: TYPE_TB
- en: '| Network EU West ↔ NA East | 80 ms | 25 MBps |'
  prefs: []
  type: TYPE_TB
- en: '| Network NA West ↔ Singapore | 180 ms | 25 MBps |'
  prefs: []
  type: TYPE_TB
- en: '| Network EU West ↔ Singapore | 160 ms | 25 MBps |'
  prefs: []
  type: TYPE_TB
