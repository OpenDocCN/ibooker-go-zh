<html><head></head><body><section data-pdf-bookmark="Chapter 5. on the list: Arrays" data-type="chapter" epub:type="chapter" class="preface"><div class="preface" id="on_the_listcolon_arrays">
<h1 class="calibre17"><span class="calibre">Chapter 5. </span>on the list: Arrays</h1>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0149-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><strong class="calibre8">A whole lot of programs deal with lists of things.</strong> Lists of addresses. Lists of phone numbers. Lists of products. Go has <em class="calibre9">two</em> built-in ways of storing lists. This chapter will introduce the first: <strong class="calibre8">arrays</strong>. You’ll learn about how to create arrays, how to fill them with data, and how to get that data back out again. Then you’ll learn about processing all the elements in array, first the <em class="calibre9">hard</em> way with <code class="calibre20">for</code> loops, and then the <em class="calibre9">easy</em> way with <code class="calibre20">for</code>...<code class="calibre20">range</code> loops.</p>
<section data-pdf-bookmark="Arrays hold collections of values" data-type="sect1" class="preface"><div class="preface" id="arrays_hold_collections_of_values">
<h1 class="calibre25">Arrays hold collections of values</h1>
<p class="calibre7"><a data-primary="arrays" data-type="indexterm" id="idm46062713154584" class="calibre10"/><a data-primary="arrays" data-secondary="about" data-type="indexterm" id="idm46062713153480" class="calibre10"/><a data-primary="lists" data-see="arrays; slices" data-type="indexterm" id="idm46062713152328" class="calibre10"/><a data-primary="structs" data-seealso="arrays; maps; slices" data-type="indexterm" id="idm46062713151208" class="calibre10"/>A local restaurant owner has a problem. He needs to know how much beef to order for the upcoming week. If he orders too much, the excess will go to waste. If he doesn’t order enough, he’ll have to tell his customers that he can’t make their favorite dishes.</p>
<p class="calibre7">He keeps data on how much meat was used the previous three weeks. He needs a program that will give him some idea of how much to order.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0150-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">This should be simple enough: we can calculate the average by taking the three amounts, adding them together, and dividing by 3. The average should offer a good estimate of how much to order.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0150-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">The first issue is going to be storing the sample values. It would be a pain to declare three separate variables, and even more so if we wanted to average more values together later. But, like most programming languages, Go offers a data structure that’s perfect for this sort of situation...</p>
<p class="calibre7">An <strong class="calibre8">array</strong> is a collection of values that all share the same type. Think of it like one of those pill boxes with compartments — you can store and retrieve pills from each compartment separately, but it’s also easy to transport the container as a whole.</p>
<p class="calibre7">The values an array holds are called its <strong class="calibre8">elements</strong>. You can have an array of strings, an array of booleans, or an array of any other Go type (even an array of arrays). You can store an entire array in a single variable, and then access any element within the array that you need.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0150-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><a data-primary="[] (square brackets)" data-see="square brackets []" data-type="indexterm" id="idm46062713142136" class="calibre10"/><a data-primary="arrays" data-secondary="indexes for" data-type="indexterm" id="idm46062713140664" class="calibre10"/><a data-primary="indexes" data-secondary="for arrays" data-type="indexterm" id="idm46062713137144" class="calibre10"/><a data-primary="square brackets []" data-type="indexterm" id="idm46062713136040" class="calibre10"/><a data-primary="square brackets []" data-secondary="arrays and" data-type="indexterm" id="idm46062713135208" class="calibre10"/>An array holds a specific number of elements, and it cannot grow or shrink. To declare a variable that holds an array, you need to specify the number of elements it holds in square brackets (<code class="calibre20">[]</code>), followed by the type of elements the array holds.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0151-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">To set the array elements’ values or to retrieve values later, you’ll need a way to specify which element you mean. Elements in an array are numbered, starting with 0. An element’s number is called its <strong class="calibre8">index</strong>.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0151-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">If you wanted to make an array with the names of notes on a musical scale, for example, the first note would be assigned to index <code class="calibre20">0</code>, the second note would be at index <code class="calibre20">1</code>, and so forth. The index is specified in square brackets.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0151-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Here’s an array of integers:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0151-04.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">And an array of <code class="calibre20">time.Time</code> values:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0151-05.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Zero values in arrays" data-type="sect1" class="preface"><div class="preface" id="zero_values_in_arrays">
<h1 class="calibre25">Zero values in arrays</h1>
<p class="calibre7"><a data-primary="arrays" data-secondary="zero values in" data-type="indexterm" id="idm46062713118536" class="calibre10"/><a data-primary="empty strings" data-type="indexterm" id="idm46062713117240" class="calibre10"/><a data-primary="int type (integer)" data-secondary="zero values for" data-type="indexterm" id="idm46062713116424" class="calibre10"/><a data-primary="numbers and numeric types" data-secondary="zero values for" data-type="indexterm" id="idm46062713115288" class="calibre10"/><a data-primary="string type (strings)" data-secondary="zero values for" data-type="indexterm" id="idm46062713114216" class="calibre10"/><a data-primary="types" data-secondary="arrays and" data-type="indexterm" id="idm46062713113080" class="calibre10"/><a data-primary="variables" data-secondary="zero values in" data-type="indexterm" id="idm46062713112008" class="calibre10"/><a data-primary="zero values" data-secondary="for arrays" data-type="indexterm" id="idm46062713110872" class="calibre10"/><a data-primary="zero values" data-secondary="for numbers" data-type="indexterm" id="idm46062713109800" class="calibre10"/><a data-primary="zero values" data-secondary="for strings" data-type="indexterm" id="idm46062713108664" class="calibre10"/><a data-primary="zero values" data-secondary="for variables" data-type="indexterm" id="idm46062713107592" class="calibre10"/>As with variables, when an array is created, all the values it contains are initialized to the zero value for the type that array holds. So an array of <code class="calibre20">int</code> values is filled with zeros by default:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0152-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">The zero value for strings, however, is an empty string, so an array of <code class="calibre20">string</code> values is filled with empty strings by default:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0152-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Zero values can make it safe to manipulate an array element even if you haven’t explicitly assigned a value to it. For example, here we have an array of integer counters. We can increment any of them without explicitly assigning a value first, because we know they will all start from <code class="calibre20">0</code>.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0152-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<blockquote class="calibre37 pcalibre1 pcalibre2">
<p class="calibre38"><strong class="calibre8">When an array is created, all the values it contains are initialized to the zero value for the type the array holds.</strong></p>
</blockquote>
</div></section>
<section data-pdf-bookmark="Array literals" data-type="sect1" class="preface"><div class="preface" id="array_literals">
<h1 class="calibre25">Array literals</h1>
<p class="calibre7"><a data-primary="array literals" data-type="indexterm" id="idm46062713097352" class="calibre10"/><a data-primary="arrays" data-secondary="about" data-type="indexterm" id="idm46062713094056" class="calibre10"/><a data-primary="curly braces {}" data-secondary="arrays and" data-type="indexterm" id="idm46062713093000" class="calibre10"/><a data-primary="literals" data-secondary="array" data-type="indexterm" id="idm46062713091832" class="calibre10"/><a data-primary="short variable declaration (:=)" data-secondary="array literals and" data-type="indexterm" id="idm46062713090728" class="calibre10"/>If you know in advance what values an array should hold, you can initialize the array with those values using an <strong class="calibre8">array literal</strong>. An array literal starts just like an array type, with the number of elements it will hold in square brackets, followed by the type of its elements. This is followed by a list in curly braces of the initial values each element should have. The element values should be separated by commas.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0153-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">These examples are just like the previous ones we showed, except that instead of assigning values to the array elements one by one, the entire array is initialized using array literals.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0153-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Using an array literal also allows you to do short variable declarations with <code class="calibre20">:=</code>.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0153-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">You can spread array literals over multiple lines, but you’re required to use a comma before each newline character in your code. You’ll even need a comma following the final entry in the array literal, if it’s followed by a newline. (This style looks awkward at first, but it makes it easier to add more elements to the code later.)</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0153-04.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar" class="calibre30"><div class="sidebar" id="exercise_9">
<h5 class="calibre31"><span class="calibre"><img alt="image" src="assets/common.png" class="calibre4"/></span> Exercise</h5>
<p class="calibre7"><a data-primary="arrays" data-secondary="fmt package support" data-type="indexterm" id="idm46062713077336" class="calibre10"/><a data-primary="fmt package" data-secondary="Println function" data-type="indexterm" id="idm46062713074328" class="calibre10"/><a data-primary="fmt package" data-secondary="Sprintf function" data-type="indexterm" id="idm46062713073256" class="calibre10"/><a data-primary="Printf function (fmt)" data-secondary="formatting output" data-type="indexterm" id="idm46062713072152" class="calibre10"/><a data-primary="Println function (fmt)" data-type="indexterm" id="idm46062713071048" class="calibre10"/><a data-primary="Sprintf function (fmt)" data-type="indexterm" id="idm46062713070216" class="calibre10"/><a data-primary="%#v formatting verb" data-type="indexterm" id="idm46062713069384" class="calibre10"/>Below is a program that declares a couple arrays and prints out their elements. Write down what the program output would be.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0154-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><span class="calibre"><img alt="image" src="assets/arrow.png" class="calibre4"/></span> Answers in <a data-type="xref" href="#exercise_solutions_9" class="calibre10">“<span class="calibre"><img alt="image" src="assets/common1.png" class="calibre4"/></span> Exercise Solution”</a>.</p>
</div></aside>
</div></section>
<section data-pdf-bookmark="Functions in the “fmt” package know how to handle arrays" data-type="sect1" class="preface"><div class="preface" id="functions_in_the_ldquofmtrdquor_package">
<h1 class="calibre25">Functions in the “fmt” package know how to handle arrays</h1>
<p class="calibre7">When you’re just trying to debug code, you don’t have to pass array elements to <code class="calibre20">Println</code> and other functions in the <code class="calibre20">fmt</code> package one by one. Just pass the entire array. There’s logic in the <code class="calibre20">fmt</code> package to format and print the array for you. (The <code class="calibre20">fmt</code> package can also handle slices, maps, and other data structures we’ll see later.)</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0154-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">You may also remember the <code class="calibre20">"%#v"</code> verb used by the <code class="calibre20">Printf</code> and <code class="calibre20">Sprintf</code> functions, which formats values as they’d appear in Go code. When formatted by <code class="calibre20">"%#v"</code>, arrays appear in the result as Go array literals.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0154-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Accessing array elements within a loop" data-type="sect1" class="preface"><div class="preface" id="accessing_array_elements_within_a_loop">
<h1 class="calibre25">Accessing array elements within a loop</h1>
<p class="calibre7"><a data-primary="arrays" data-secondary="accessing elements within loops" data-type="indexterm" id="idm46062713052520" class="calibre10"/><a data-primary="arrays" data-secondary="for loops and" data-type="indexterm" id="idm46062713051032" class="calibre10"/><a data-primary="arrays" data-secondary="indexes for" data-type="indexterm" id="idm46062713049912" class="calibre10"/><a data-primary="arrays" data-secondary="panics and" data-type="indexterm" id="idm46062713048808" class="calibre10"/><a data-primary="for loops" data-secondary="array elements and" data-type="indexterm" id="idm46062713047672" class="calibre10"/><a data-primary="indexes" data-secondary="for arrays" data-type="indexterm" id="idm46062713046600" class="calibre10"/><a data-primary="loops" data-secondary="accessing array elements within" data-type="indexterm" id="idm46062713045464" class="calibre10"/><a data-primary="loops" data-secondary="for" data-type="indexterm" id="idm46062713044360" class="calibre10"/><a data-primary="panicking programs and messages" data-secondary="avoiding" data-type="indexterm" id="idm46062713043224" class="calibre10"/>You don’t have to explicitly write the integer index of the array element you’re accessing in your code. You can also use the value in an integer variable as the array index.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0155-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">That means you can do things like process elements of an array using a <code class="calibre20">for</code> loop. You loop through indexes in the array, and use the loop variable to access the element at the current index.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0155-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">When accessing array elements using a variable, you need to be careful which index values you use. As we mentioned, arrays hold a specific number of elements. Trying to access an index that is outside the array will cause a <strong class="calibre8">panic</strong>, an error that occurs while your program is running (as opposed to when it’s compiling).</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0155-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Normally, a panic causes your program to crash and display an error message to the user. Needless to say, panics should be avoided whenever possible.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0155-04.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Checking array length with the “len” function" data-type="sect1" class="preface"><div class="preface" id="checking_array_length_with_the_ldquolenr">
<h1 class="calibre25">Checking array length with the “len” function</h1>
<p class="calibre7"><a data-primary="arrays" data-secondary="len function and" data-type="indexterm" id="idm46062713030264" class="calibre10"/><a data-primary="len built-in function" data-secondary="arrays and" data-type="indexterm" id="idm46062713028472" class="calibre10"/>Writing loops that only access valid array indexes can be somewhat error-prone. Fortunately, there are a couple ways to make the process easier.</p>
<p class="calibre7">The first is to check the actual number of elements in the array before accessing it. You can do this with the built-in <code class="calibre20">len</code> function, which returns the length of the array (the number of elements it contains).</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0156-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">When setting up a loop to process an entire array, you can use <code class="calibre20">len</code> to determine which indexes are safe to access.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0156-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">This still has the potential for mistakes, though. If <code class="calibre20">len(notes)</code> returns <code class="calibre20">7</code>, the highest index you can access is <code class="calibre20">6</code> (because array indexes start at <code class="calibre20">0</code>, not <code class="calibre20">1</code>). If you try to access index <code class="calibre20">7</code>, you’ll get a panic.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0156-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Looping over arrays safely with “for...range”" data-type="sect1" class="preface"><div class="preface" id="looping_over_arrays_safely_with_ldquofor">
<h1 class="calibre25">Looping over arrays safely with “for...range”</h1>
<p class="calibre7"><a data-primary="arrays" data-secondary="for loops and" data-type="indexterm" id="idm46062713014536" class="calibre10"/><a data-primary="arrays" data-secondary="for ... range loops and" data-type="indexterm" id="idm46062713012952" class="calibre10"/><a data-primary="for loops" data-secondary="array elements and" data-type="indexterm" id="idm46062713011864" class="calibre10"/><a data-primary="for ... range loops" data-type="indexterm" id="idm46062713010728" class="calibre10"/><a data-primary="loops" data-secondary="for ... range" data-type="indexterm" id="idm46062713009896" class="calibre10"/>An even safer way to process each element of an array is to use the special <code class="calibre20">for</code>...<code class="calibre20">range</code> loop. In the <code class="calibre20">range</code> form, you provide a variable that will hold the integer index of each element, another variable that will hold the value of the element itself, and the array you want to loop over. The loop will run once for each element in the array, assigning the element’s index to your first variable and the element’s value to your second variable. You can add code to the loop block to process those values.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0157-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">This form of the <code class="calibre20">for</code> loop has no messy init, condition, and post expressions. And because the element value is automatically assigned to a variable for you, there’s no risk that you’ll accidentally access an invalid array index. Because it’s safer and easier to read, you’ll see the <code class="calibre20">for</code> loop’s <code class="calibre20">range</code> form used most often when working with arrays and other collections.</p>
<p class="calibre7">Here’s our previous code that prints each value in our array of musical notes, updated to use a <code class="calibre20">for</code> ... <code class="calibre20">range</code> loop:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0157-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">The loop runs seven times, once for each element of the <code class="calibre20">notes</code> array. For each element, the <code class="calibre20">index</code> variable gets set to the element’s index, and the <code class="calibre20">note</code> variable gets set to the element’s value. Then we print the index and value.</p>
</div></section>
<section data-pdf-bookmark="Using the blank identifier with “for...range” loops" data-type="sect1" class="preface"><div class="preface" id="using_the_blank_identifier_with_ldquofor">
<h1 class="calibre25">Using the blank identifier with “for...range” loops</h1>
<p class="calibre7"><a data-primary="blank identifier (_)" data-secondary="for ... range loops and" data-type="indexterm" id="idm46062712996120" class="calibre10"/>As always, Go requires that you use every variable you declare. If we stop using the <code class="calibre20">index</code> variable from our <code class="calibre20">for</code>...<code class="calibre20">range</code> loop, we’ll get a compile error:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0158-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">And the same would be true if we didn’t use the variable that holds the element value:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0158-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Remember in <a data-type="xref" href="ch02.html#which_code_runs_nextquestcolon_condition" class="calibre10">Chapter 2</a>, when we were calling a function with multiple return values, and we wanted to ignore one of them? We assigned that value to the blank identifier (<code class="calibre20">_</code>), which causes Go to discard that value, without giving a compiler error...</p>
<p class="calibre7">We can do the same with values from <code class="calibre20">for</code>...<code class="calibre20">range</code> loops. If we don’t need the index for each array element, we can just assign it to the blank identifier:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0158-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">And if we don’t need the value variable, we can assign that to the blank identifier instead:</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0158-04.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Getting the sum of the numbers in an array" data-type="sect1" class="preface"><div class="preface" id="getting_the_sum_of_the_numbers_in_an_arr">
<h1 class="calibre25">Getting the sum of the numbers in an array</h1>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0159-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><a data-primary="arrays" data-secondary="sum of numbers in" data-type="indexterm" id="idm46062712977352" class="calibre10"/><a data-primary="numbers and numeric types" data-secondary="getting sum of numbers in arrays" data-type="indexterm" id="idm46062712975864" class="calibre10"/><a data-primary="sum of numbers in arrays" data-type="indexterm" id="idm46062712974888" class="calibre10"/>We finally know everything we need to create an array of <code class="calibre20">float64</code> values and calculate their average. Let’s take the amounts of beef that were used in previous weeks, and incorporate them into a program, named <code class="calibre20">average</code>.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0159-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">The first thing we’ll need to do is set up a program file. In your Go workspace directory (the <em class="calibre9">go</em> directory within your user’s home directory, unless you’ve set the <code class="calibre20">GOPATH</code> environment variable), create the following nested directories (if they don’t already exist). Within the innermost directory, <em class="calibre9">average</em>, save a file named <em class="calibre9">main.go</em>.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0159-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Now let’s write our program code within the <em class="calibre9">main.go</em> file. Since this will be an executable program, our code will be part of the <code class="calibre20">main</code> package, and will reside in the <code class="calibre20">main</code> function.</p>
<p class="calibre7">We’ll start by just calculating the total for the three sample values; we can go back later to calculate the average. We use an array literal to create an array of three <code class="calibre20">float64</code> values, prepopulated with the sample values from prior weeks. We declare a <code class="calibre20">float64</code> variable named <code class="calibre20">sum</code> to hold the total, starting with a value of <code class="calibre20">0</code>.</p>
<p class="calibre7">Then we use a <code class="calibre20">for</code>...<code class="calibre20">range</code> loop to process each number. We don’t need the element indexes, so we discard them using the <code class="calibre20">_</code> blank identifier. We add each number to the value in <code class="calibre20">sum</code>. After we’ve totaled all the values, we print <code class="calibre20">sum</code> before exiting.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0159-04.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><a data-primary="cd command" data-type="indexterm" id="idm46062712957208" class="calibre10"/><a data-primary="go install command" data-type="indexterm" id="idm46062712955992" class="calibre10"/>Let’s try compiling and running our program. We’ll use the <code class="calibre20">go install</code> command to create an executable. We’re going to need to provide our executable’s import path to <code class="calibre20">go install</code>. If we used this directory structure...</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0160-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">...that means the import path for our package will be <code class="calibre20"><a href="http://github.com/headfirstgo/average" class="calibre10">github.com/headfirstgo/average</a></code>. So, from your terminal, type:</p>
<p class="calibre7"><code class="calibre20">go install github.com/headfirstgo/average</code></p>
<p class="calibre7">You can do so from within any directory. The <code class="calibre20">go</code> tool will look for a <em class="calibre9"><a href="http://github.com/headfirstgo/average" class="calibre10">github.com/headfirstgo/average</a></em> directory within your workspace’s <em class="calibre9">src</em> directory, and compile any <em class="calibre9">.go</em> files it contains. The resulting executable will be named <code class="calibre20">average</code>, and will be stored in the <em class="calibre9">bin</em> directory within your Go workspace.</p>
<p class="calibre7">Then, you can use the <strong class="calibre8"><code class="calibre40">cd</code></strong> command to change to the <em class="calibre9">bin</em> directory within your Go workspace. Once you’re in <em class="calibre9">bin</em>, you can run the executable by typing <strong class="calibre8"><code class="calibre40">./average</code></strong> (or <strong class="calibre8"><code class="calibre40">average.exe</code></strong> on Windows).</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0160-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">The program will print the total of the three values from our array and exit.</p>
</div></section>
<section data-pdf-bookmark="Getting the average of the numbers in an array" data-type="sect1" class="preface"><div class="preface" id="getting_the_average_of_the_numbers_in_an">
<h1 class="calibre25">Getting the average of the numbers in an array</h1>
<p class="calibre7"><a data-primary="arrays" data-secondary="average of numbers in" data-type="indexterm" id="idm46062712939688" class="calibre10"/><a data-primary="arrays" data-secondary="len function and" data-type="indexterm" id="idm46062712938040" class="calibre10"/><a data-primary="average of numbers in arrays" data-type="indexterm" id="idm46062712937000" class="calibre10"/><a data-primary="len built-in function" data-secondary="arrays and" data-type="indexterm" id="idm46062712936120" class="calibre10"/><a data-primary="numbers and numeric types" data-secondary="getting average of numbers in arrays" data-type="indexterm" id="idm46062712934968" class="calibre10"/>We’ve got our <code class="calibre20">average</code> program printing the total of the array’s values, so now let’s update it to print the actual average. To do that, we’ll divide the total by the array’s length.</p>
<p class="calibre7">Passing the array to the <code class="calibre20">len</code> function returns an <code class="calibre20">int</code> value with the array length. But since the total in the <code class="calibre20">sum</code> variable is a <code class="calibre20">float64</code> value, we’ll need to convert the length to a <code class="calibre20">float64</code> as well so we can use them together in a math operation. We store the result in the <code class="calibre20">sampleCount</code> variable. Once that’s done, all we have to do is divide <code class="calibre20">sum</code> by <code class="calibre20">sampleCount</code>, and print the result.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0161-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Once the code is updated, we can repeat the previous steps to see the new result: run <strong class="calibre8"><code class="calibre40">go install</code></strong> to recompile the code, change to the <em class="calibre9">bin</em> directory, and run the updated <code class="calibre20">average</code> executable. Instead of the sum of the values in the array, we’ll see the average.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0161-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Pool Puzzle" data-type="sect1" class="preface"><div class="preface" id="pool_puzzle_5">
<h1 class="calibre25">Pool Puzzle</h1>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/chair.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Your <strong class="calibre8">job</strong> is to take code snippets from the pool and place them into the blank lines in this code. <strong class="calibre8">Don’t</strong> use the same snippet more than once, and you won’t need to use all the snippets. Your <strong class="calibre8">goal</strong> is to make a program that will print the index and value of all the array elements that fall between <code class="calibre20">10</code> and <code class="calibre20">20</code> (it should match the output shown).</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0162-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0162-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><strong class="calibre8">Note: each snippet from the pool can only be used once!</strong></p>
<p class="calibre7"><span class="calibre"><img alt="image" src="assets/arrow.png" class="calibre4"/></span> Answers in <a data-type="xref" href="#pool_puzzle_Solution_3" class="calibre10">“Pool Puzzle Solution”</a>.</p>
</div></section>
<section data-pdf-bookmark="Reading a text file" data-type="sect1" class="preface"><div class="preface" id="reading_a_text_file">
<h1 class="calibre25">Reading a text file</h1>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0163-01a.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0163-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><a data-primary="bufio package" data-secondary="about" data-type="indexterm" id="idm46062712903960" class="calibre10"/><a data-primary="file management" data-secondary="reading text files" data-type="indexterm" id="idm46062712902376" class="calibre10"/><a data-primary="reading text files" data-secondary="about" data-type="indexterm" id="idm46062712901240" class="calibre10"/><a data-primary="text files" data-secondary="reading" data-type="indexterm" id="idm46062712900168" class="calibre10"/>That’s true—a program where users have to edit and compile the source code themselves isn’t very user-friendly.</p>
<p class="calibre7">Previously, we’ve used the standard library’s <code class="calibre20">os</code> and <code class="calibre20">bufio</code> packages to read data a line at a time from the keyboard. We can use the same packages to read data a line at a time from text files. Let’s go on a brief detour to learn how to do that.</p>
<p class="calibre7">Then, we’ll come back and update the <code class="calibre20">average</code> program to read its numbers in from a text file.</p>
<p class="calibre7">In your favorite text editor, create a new file named <em class="calibre9">data.txt</em>. Save it somewhere <em class="calibre9">outside</em> of your Go workspace directory for now.</p>
<p class="calibre7">Within the file, enter our three floating-point sample values, one number per line.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0163-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0163-01a.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Before we can update our program to average numbers from a text file, we need to be able to read the file’s contents. To start, let’s write a program that only reads the file, and then we’ll incorporate what we learn into our averaging program.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0164-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">In the same directory as <em class="calibre9">data.txt</em>, create a new program named <em class="calibre9">readfile.go</em>. We’ll just be running <em class="calibre9">readfile.go</em> with <code class="calibre20">go run</code>, rather than installing it, so it’s okay to save it outside of your Go workspace directory. Save the following code in <em class="calibre9">readfile.go</em>. (We’ll take a closer look at how this code works on the next page.)</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0164-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Then, from your terminal, change to the directory where you saved the two files, and run <strong class="calibre8"><code class="calibre40">go run readfile.go</code></strong>. The program will read the contents of <em class="calibre9">data.txt</em>, and print them out.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0164-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0163-01a.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><a data-primary="bufio package" data-secondary="Close method" data-type="indexterm" id="idm46062712877192" class="calibre10"/><a data-primary="bufio package" data-secondary="Err method" data-type="indexterm" id="idm46062712875800" class="calibre10"/><a data-primary="bufio package" data-secondary="Scan method" data-type="indexterm" id="idm46062712874664" class="calibre10"/><a data-primary="bufio package" data-secondary="Scanner type" data-type="indexterm" id="idm46062712873592" class="calibre10"/><a data-primary="Close method (bufio)" data-type="indexterm" id="idm46062712872456" class="calibre10"/><a data-primary="closing files" data-type="indexterm" id="idm46062712871592" class="calibre10"/><a data-primary="Err method (bufio)" data-type="indexterm" id="idm46062712870760" class="calibre10"/><a data-primary="file management" data-secondary="closing files" data-type="indexterm" id="idm46062712869928" class="calibre10"/><a data-primary="file management" data-secondary="opening files" data-type="indexterm" id="idm46062712868792" class="calibre10"/><a data-primary="File type (os)" data-type="indexterm" id="idm46062712867720" class="calibre10"/><a data-primary="Open function (os)" data-type="indexterm" id="idm46062712866888" class="calibre10"/><a data-primary="opening files" data-type="indexterm" id="idm46062712866056" class="calibre10"/><a data-primary="os package" data-secondary="File type" data-type="indexterm" id="idm46062712865224" class="calibre10"/><a data-primary="os package" data-secondary="Open function" data-type="indexterm" id="idm46062712864088" class="calibre10"/><a data-primary="Scan method (bufio)" data-type="indexterm" id="idm46062712863016" class="calibre10"/><a data-primary="Scanner type (bufio)" data-type="indexterm" id="idm46062712862184" class="calibre10"/>Our test <em class="calibre9">readfile.go</em> program is successfully reading the lines of the <em class="calibre9">data.txt</em> file and printing them out. Let’s take a closer look at how the program works.</p>
<p class="calibre7">We start by passing a string with the name of the file we want to open to the <code class="calibre20">os.Open</code> function. Two values are returned from <code class="calibre20">os.Open</code>: a pointer to an <code class="calibre20">os.File</code> value representing the opened file, and an <code class="calibre20">error</code> value. As we’ve seen with so many other functions, if the <code class="calibre20">error</code> value is <code class="calibre20">nil</code> it means the file was opened successfully, but any other value means there was an error. (This could happen if the file is missing or unreadable.) If that’s the case, we log the error message and exit the program.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0165-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Then we pass the <code class="calibre20">os.File</code> value to the <code class="calibre20">bufio.NewScanner</code> function. That will return a <code class="calibre20">bufio.Scanner</code> value that reads from the file.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0165-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">The <code class="calibre20">Scan</code> method on <code class="calibre20">bufio.Scanner</code> is designed to be used as part of a <code class="calibre20">for</code> loop. It will read a single line of text from the file, returning <code class="calibre20">true</code> if it read data successfully and <code class="calibre20">false</code> if it did not. If <code class="calibre20">Scan</code> is used as the condition on a <code class="calibre20">for</code> loop, the loop will continue running as long as there is more data to be read. Once the end of the file is reached (or there’s an error), <code class="calibre20">Scan</code> will return <code class="calibre20">false</code>, and the loop will exit.</p>
<p class="calibre7">After calling the <code class="calibre20">Scan</code> method on the <code class="calibre20">bufio.Scanner</code>, calling the <code class="calibre20">Text</code> method returns a string with the data that was read. For this program, we simply call <code class="calibre20">Println</code> within the loop to print each line out.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0165-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Once the loop exits, we’re done with the file. Keeping files open consumes resources from the operating system, so files should always be closed when a program is done with them. Calling the <code class="calibre20">Close</code> method on the <code class="calibre20">os.File</code> will accomplish this. Like the <code class="calibre20">Open</code> function, the <code class="calibre20">Close</code> method returns an <code class="calibre20">error</code> value, which will be <code class="calibre20">nil</code> unless there was a problem. (Unlike <code class="calibre20">Open</code>, <code class="calibre20">Close</code> returns only a <em class="calibre9">single</em> value, as there is no useful value for it to return other than the error.)</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0165-04.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">It’s also possible that the <code class="calibre20">bufio.Scanner</code> encountered an error while scanning through the file. If it did, calling the <code class="calibre20">Err</code> method on the scanner will return that error, which we log before exiting.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0165-05.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0165-06.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Reading a text file into an array" data-type="sect1" class="preface"><div class="preface" id="reading_a_text_file_into_an_array">
<h1 class="calibre25">Reading a text file into an array</h1>
<p class="calibre7"><a data-primary="arrays" data-secondary="reading text files into" data-type="indexterm" id="idm46062712828952" class="calibre10"/><a data-primary="file management" data-secondary="reading text files into arrays" data-type="indexterm" id="idm46062712827528" class="calibre10"/><a data-primary="packages" data-secondary="creating" data-type="indexterm" id="idm46062712826408" class="calibre10"/><a data-primary="reading text files" data-secondary="into arrays" data-type="indexterm" id="idm46062712825256" class="calibre10"/><a data-primary="text files" data-secondary="reading into arrays" data-type="indexterm" id="idm46062712824136" class="calibre10"/>Our <em class="calibre9">readfile.go</em> program worked great—we were able to read the lines from our <em class="calibre9">data.txt</em> file in as strings, and print them out. Now we need to convert those strings to numbers and store them in an array. Let’s create a package named <code class="calibre20">datafile</code> that will do this for us.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0166-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">In your Go workspace directory, create a <em class="calibre9">datafile</em> directory within the <em class="calibre9">headfirstgo</em> directory. Within the <em class="calibre9">datafile</em> directory, save a file named <em class="calibre9">floats.go</em>. (We name it <em class="calibre9">floats.go</em> because this file will contain code that reads floating-point numbers from files.)</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0166-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Within <em class="calibre9">floats.go</em>, save the following code. A lot of this is based on code from our test <em class="calibre9">readfile.go</em> program; we’ve grayed out the parts where the code is identical. We’ll explain the new code in detail on the next page.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0166-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><a data-primary="ParseFloat function (strconv)" data-type="indexterm" id="idm46062712810984" class="calibre10"/><a data-primary="strconv package" data-secondary="ParseFloat function" data-type="indexterm" id="idm46062712810168" class="calibre10"/>We want to be able to read from files other than <em class="calibre9">data.txt</em>, so we accept the name of the file we should open as a parameter. We set the function up to return two values, an array of <code class="calibre20">float64</code> values and an <code class="calibre20">error</code> value. Like most functions that return an error, the first return value should only be considered usable if the error value is <code class="calibre20">nil</code>.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0167-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Next we declare an array of three <code class="calibre20">float64</code> values that will hold the numbers we read from the file.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0167-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Just like in <em class="calibre9">readfile.go</em>, we open the file for reading. The difference is that instead of a hardcoded string of <code class="calibre20">"data.txt"</code>, we open whatever filename was passed to the function. If an error is encountered, we need to return an array along with the error value, so we just return the <code class="calibre20">numbers</code> array (even though nothing has been assigned to it yet).</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0167-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">We need to know which array element to assign each line to, so we create a variable to track the current index.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0167-04.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">The code to set up a <code class="calibre20">bufio.Scanner</code> and loop over the file’s lines is identical to the code from <em class="calibre9">readfile.go</em>. The code within the loop is different, however: we need to call <code class="calibre20">strconv.ParseFloat</code> on the string read from the file to convert it to a <code class="calibre20">float64</code>, and assign the result to the array. If <code class="calibre20">ParseFloat</code> results in an error, we need to return that. And if the parsing is successful, we need to increment <code class="calibre20">i</code> so that the next number is assigned to the next array element.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0167-05.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Our code to close the file and report any errors is identical to <em class="calibre9">readfile.go</em>, except that we return any errors instead of exiting the program directly. If there are no errors, the end of the <code class="calibre20">GetFloats</code> function will be reached, and the array of <code class="calibre20">float64</code> values will be returned along with a <code class="calibre20">nil</code> error.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0167-06.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Updating our “average” program to read a text file" data-type="sect1" class="preface"><div class="preface" id="updating_our_ldquoaveragerdquor_program">
<h1 class="calibre25">Updating our “average” program to read a text file</h1>
<p class="calibre7">We’re ready to replace the hardcoded array in our <code class="calibre20">average</code> program with an array read in from the <em class="calibre9">data.txt</em> file!</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0168-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Writing our <code class="calibre20">datafile</code> package was the hard part. Here in the main program, we only need to do three things:</p>
<ul class="list_style_type_none">
<li class="calibre18"><p class="calibre7">Update our <code class="calibre20">import</code> declaration to include the <code class="calibre20">datafile</code> and <code class="calibre20">log</code> packages.</p></li>
<li class="calibre18"><p class="calibre7">Replace our array of hardcoded numbers with a call to <code class="calibre20">datafile.GetFloats("data.txt")</code>.</p></li>
<li class="calibre18"><p class="calibre7">Check whether we got an error back from <code class="calibre20">GetFloats</code>, and log it and exit if so.</p></li>
</ul>
<p class="calibre7">All the remaining code will be exactly the same.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0168-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">We can compile the program using the same terminal command as before:</p>
<p class="calibre7"><code class="calibre20">go install github.com/headfirstgo/average</code></p>
<p class="calibre7">Since our program imports the <code class="calibre20">datafile</code> package, that will automatically be compiled as well.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0169-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">We’ll need to move the <em class="calibre9">data.txt</em> file to the <em class="calibre9">bin</em> subdirectory of the Go workspace. That’s because we’ll be running the <code class="calibre20">average</code> executable from that directory, and it will look for <em class="calibre9">data.txt</em> in the same directory. Once you’ve moved <em class="calibre9">data.txt</em>, change into that <em class="calibre9">bin</em> subdirectory.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0169-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">When we run the <code class="calibre20">average</code> executable, it will load the values from <em class="calibre9">data.txt</em> into an array, and use them to calculate the average.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0169-03.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">If we change the values in <em class="calibre9">data.txt</em>, the average will change as well.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0169-04.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></section>
<section data-pdf-bookmark="Our program can only process three values!" data-type="sect1" class="preface"><div class="preface" id="our_program_can_only_process_three_value">
<h1 class="calibre25">Our program can only process three values!</h1>
<p class="calibre7"><a data-primary="panicking programs and messages" data-secondary="about" data-type="indexterm" id="idm46062712756712" class="calibre10"/>But there’s a problem—the <code class="calibre20">average</code> program only runs if there are three or fewer lines in <em class="calibre9">data.txt</em>. If there are four or more, <code class="calibre20">average</code> will panic and exit when it’s run!</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0170-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">When a Go program panics, it outputs a report with information on the line of code where the problem occurred. In this case, it looks like the problem is on line 20 of the <em class="calibre9">floats.go</em> file.</p>
<p class="calibre7">If we look at line 20 of <em class="calibre9">floats.go</em>, we’ll see that it’s the part of the <code class="calibre20">GetFloats</code> function where numbers from the file get added to the array!</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0170-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><a data-primary="arrays" data-secondary="about" data-type="indexterm" id="idm46062712747288" class="calibre10"/>Remember when a mistake in a previous code sample led a program to attempt to access an eighth element of a seven-element array? That program panicked and exited, too.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0171-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">The same problem is happening in our <code class="calibre20">GetFloats</code> function. Because we declared that the <code class="calibre20">numbers</code> array holds three elements, that’s <em class="calibre9">all</em> it can hold. When the fourth line of the <em class="calibre9">data.txt</em> file is reached, it attempts to assign to a <em class="calibre9">fourth</em> element of <code class="calibre20">numbers</code>, which results in a panic.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0171-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7">Go arrays are fixed in size; they can’t grow or shrink. But the <em class="calibre9">data.txt</em> file can have as many lines as the user wants to add. We’ll see a solution for this dilemma in the next chapter!</p>
</div></section>
<section data-pdf-bookmark="Your Go Toolbox" data-type="sect1" class="preface"><div class="preface" id="your_go_toolbox_5">
<h1 class="calibre25">Your Go Toolbox</h1>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0172-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"><strong class="calibre8">That’s it for <a data-type="xref" href="#on_the_listcolon_arrays" class="calibre10">Chapter 5</a>! You’ve added arrays to your toolbox.</strong></p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0172-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<aside data-type="sidebar" epub:type="sidebar" class="calibre30"><div class="sidebar" id="Bullet_Points_5">
<h5 class="calibre31">Bullet Points</h5>
<ul class="list_style_type_none">
<li class="calibre18"><p class="calibre7">To declare an array variable, include the array length in square brackets and the type of elements it will hold:</p>
<p class="calibre7"><code class="calibre20">var myArray [3]int</code></p></li>
<li class="calibre18"><p class="calibre7">To assign or access an element of an array, provide its index in square brackets. Indexes start at 0, so the first element of <code class="calibre20">myArray</code> is <code class="calibre20">myArray[0]</code>.</p></li>
<li class="calibre18"><p class="calibre7">As with variables, the default value for all array elements is the zero value for that element’s type.</p></li>
<li class="calibre18"><p class="calibre7">You can set element values at the time an array is created using an <strong class="calibre8">array literal</strong>:</p>
<p class="calibre7"><code class="calibre20">[3]int{4, 9, 6}</code></p></li>
<li class="calibre18"><p class="calibre7">If you store an index that is not valid for an array in a variable, and then try to access an array element using that variable as an index, you will get a panic—a runtime error.</p></li>
<li class="calibre18"><p class="calibre7">You can get the number of elements in an array with the built-in <code class="calibre20">len</code> function.</p></li>
<li class="calibre18"><p class="calibre7">You can conveniently process all the elements of an array using the special <code class="calibre20">for</code>...<code class="calibre20">range</code> loop syntax, which loops through each element and assigns its index and value to variables you provide.</p></li>
<li class="calibre18"><p class="calibre7">When using a <code class="calibre20">for</code>...<code class="calibre20">range</code> loop, you can ignore either the index or value for each element by assigning it to the <code class="calibre20">_</code> blank identifier.</p></li>
<li class="calibre18"><p class="calibre7">The <code class="calibre20">os.Open</code> function opens a file. It returns a pointer to an <code class="calibre20">os.File</code> value representing that opened file.</p></li>
<li class="calibre18"><p class="calibre7">Passing an <code class="calibre20">os.File</code> value to <code class="calibre20">bufio.NewScanner</code> returns a <code class="calibre20">bufio.Scanner</code> value whose <code class="calibre20">Scan</code> and <code class="calibre20">Text</code> methods can be used to read a line at a time from the file as strings.</p></li>
</ul>
</div></aside>
<aside data-type="sidebar" epub:type="sidebar" class="calibre30"><div class="sidebar" id="exercise_solutions_9">
<h5 class="calibre31"><span class="calibre"><img alt="image" src="assets/common1.png" class="calibre4"/></span> Exercise Solution</h5>
<p class="calibre7">Below is a program that declares a couple arrays and prints out their elements. Write down what the program output would be.</p>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0173-01.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
</div></aside>
</div></section>
<section data-pdf-bookmark="Pool Puzzle Solution" data-type="sect1" class="preface"><div class="preface" id="pool_puzzle_Solution_3">
<h1 class="calibre25">Pool Puzzle Solution</h1>
<figure class="informal"><div class="figure">
<img alt="image" src="assets/f0173-02.png" class="calibre4"/>
<h6 class="calibre5"/>
</div></figure>
<p class="calibre7"/>
</div></section>
</div></section></body></html>