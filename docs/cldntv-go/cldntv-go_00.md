# 序言

对于技术人员来说，现在是一个神奇的时代。

我们有 Docker 来构建容器，有 Kubernetes 来编排它们。Prometheus 让我们可以监控它们。Consul 让我们可以发现它们。Jaeger 让我们可以追踪它们之间的关系。这些只是几个例子，但还有很多很多，都代表了一个新一代的技术：它们都是“云原生”的，而且全部都是用*Go*语言编写的。

“云原生”这个术语听起来模糊而充满噱头，但实际上它有一个相当具体的定义。根据著名 Linux 基金会的子基金会 Cloud Native Computing Foundation 的说法，云原生应用程序是指设计成能够在极其变化的负载面前实现可伸缩性，在环境不确定性面前具有弹性，在不断变化的需求面前易于管理。换句话说，云原生应用程序是为在这个残酷而不确定的宇宙中生存而设计的。

结合多年构建基于云的软件的经验，Go 语言大约十年前被创建为第一种专门设计用于开发云原生软件的主要语言。这主要是因为当时常见的服务器语言并不适合编写谷歌大量生产的分布式、进程密集型应用程序。

自那时以来，Go 语言已经成为云原生开发的*通用语言*，被广泛应用于从 Docker 到 Harbor、Kubernetes 到 Consul、InfluxDB 到 CockroachDB 的各种项目中。云原生计算基金会的十五个毕业项目中，有十个使用大部分或全部是 Go 语言编写的；总计六十二个项目中，有四十二个使用了 Go 语言。而且每天还有更多的项目加入。

# 适合阅读本书的人群

本书主要面向中高级开发人员，特别是 Web 应用程序工程师和 DevOps 专家/站点可靠性工程师。许多人已经使用 Go 构建 Web 服务，但可能对云原生开发的细微差别不熟悉，甚至对“云原生”是什么都不清楚，并且发现他们的服务难以管理、部署或监控。对于这些读者，本书将提供不仅如何构建云原生服务的坚实基础，还将展示为什么这些技术至关重要，并提供具体示例来理解这个有时抽象的主题。

预计很多读者可能更熟悉其他编程语言，但由于 Go 语言作为云原生开发语言的声誉而被吸引。对于这些读者，本书将介绍采用 Go 作为他们云原生开发语言的最佳实践，并帮助他们解决自己的云原生管理和部署问题。

# 为什么写这本书

应用程序的设计，构建和部署方式正在发生变化。规模的需求正在迫使开发人员将其服务的工作分布到大量服务器上：行业正在“云原生”转型。但这带来了一系列新问题：如何在十台服务器上开发、部署或管理服务？一百台？一千台？不幸的是，现有的“云原生”领域的书籍主要集中在抽象的设计原则上，并且几乎没有或根本没有提供这些问题的基本示例。本书旨在填补市场对复杂云原生设计原则实际演示的需求。

# 本书中使用的约定

本书使用以下排版约定：

*斜体*

指示新术语，URL，电子邮件地址，文件名和文件扩展名。

`常量宽度`

用于程序清单，以及在段落中引用程序元素，如变量或函数名，数据库，数据类型，环境变量，语句和关键字。

**`常量宽度加粗`**

显示用户应按原样键入的命令或其他文本。

*`常量宽度斜体`*

显示应该用用户提供的值替换或根据上下文确定的值的文本。

###### 提示

这个元素表示一个提示或建议。

###### 注意

这个元素表示一般性说明。

###### 警告

这个元素表示一个警告或注意事项。

# 使用代码示例

补充材料（代码示例，练习等）可在[*https://github.com/cloud-native-go/examples*](https://github.com/cloud-native-go/examples)下载。

本书旨在帮助您完成工作。一般情况下，如果本书提供了示例代码，您可以在您的程序和文档中使用它。除非您正在复制代码的大部分内容，否则无需征得我们的许可。例如，编写一个使用本书中几个代码块的程序不需要许可。销售或分发 O’Reilly 图书的示例需要许可。引用本书并引用示例代码来回答问题不需要许可。将本书中大量的示例代码整合到您产品的文档中需要许可。

我们感谢但不需要署名。署名通常包括标题，作者，出版商和 ISBN。例如：“*Cloud Native Go* by Matthew A. Titmus (O’Reilly). Copyright 2021 Matthew A. Titmus, 978-1-492-07633-9.”

如果您认为您使用的代码示例超出了合理使用范围或上述许可的权限，请随时通过*permissions@oreilly.com*与我们联系。

# O’Reilly 在线学习

###### 注意

40 多年来，[*O’Reilly Media*](http://oreilly.com) 提供技术和商业培训，知识和见解，帮助公司取得成功。

我们独特的专家和创新者网络通过书籍、文章和我们的在线学习平台分享他们的知识和专长。O’Reilly 的在线学习平台让您随时访问现场培训课程、深入学习路径、交互式编码环境，以及来自 O’Reilly 和其他 200 多家出版商的大量文本和视频。有关更多信息，请访问[*http://oreilly.com*](http://oreilly.com)。

# 如何联系我们

请将有关本书的评论和问题发送至出版商：

+   O’Reilly Media, Inc.

+   1005 Gravenstein Highway North

+   Sebastopol, CA 95472

+   800-998-9938（美国或加拿大）

+   707-829-0515（国际或本地）

+   707-829-0104（传真）

我们为本书建立了一个网页，列出勘误、示例和任何额外信息。您可以访问[*https://oreil.ly/cloud-native-go*](https://oreil.ly/cloud-native-go)。

发送电子邮件至*bookquestions@oreilly.com*，以评论或询问有关本书的技术问题。

有关我们的书籍、课程、会议和新闻的更多信息，请访问我们的网站[*http://www.oreilly.com*](http://www.oreilly.com)。

在 Facebook 上找到我们：[*http://facebook.com/oreilly*](http://facebook.com/oreilly)

在 Twitter 关注我们：[*http://twitter.com/oreillymedia*](http://twitter.com/oreillymedia)

在 YouTube 观看我们：[*http://www.youtube.com/oreillymedia*](http://www.youtube.com/oreillymedia)

# 致谢

首先，我要感谢我的妻子和儿子。自从你们进入我的生活以来，你们是我做每件好事的动力，是让我保持方向真实、目光向天空的指南星。

致我们不久前失去的父亲。你是我所认识的最接近真正文艺复兴人的人，同时还能保持最善良、最谦逊。长大后，我仍想像你一样。

致 Mary。没有人比她更深刻地感受到他的缺席。你是家人，永远是家人，即使我没有经常给你打电话。爸爸会为你的坚韧和优雅感到骄傲。

致 Sarah。我总是对你的坚强和毅力感到惊讶。自从你能说话以来，你聪明的头脑使你成为我最坚定的盟友和最激烈的对手。别告诉 Nathan，但你是我最喜欢的兄弟姐妹。

致 Nathan。如果我们都继承了爸爸三分之一的天才，你得到了他的心。我经常不这么说，但我为你和你的成就感到非常骄傲。别告诉 Sarah，但你是我最喜欢的兄弟姐妹。

致妈妈。你坚强聪明，色彩斑斓而不拘一格。谢谢你教会我始终做实际需要的事情，不管别人怎么想。保持怪异，记得喂鸡。

致 Albert。你有一颗巨大的心和无穷的耐心。感谢你加入我们的家庭；因为有你，我们变得更好。

致我的其他家人们。我很少有机会见到你们，我非常想念你们，但每当我需要时，你们总是在那里支持我。感谢你们和我一起庆祝胜利，支持我度过挫折。

致 Walt 和 Alvaro，即使我换了工作也似乎摆脱不了你们。当我需要时，感谢你们的热情支持，以及当我需要现实主义时的坦率。你们让我成为一名更好的工程师。同时，感谢你们介绍我认识了 Will Wight 的 Cradle 系列，以及随之而来的沉迷。

致“Jeff Classic”，“New Jeff”，Alex，Markan，Priyanka，Sam，Owen，Matt M.，Marius，Peter，Rohit 以及我在 Flatiron Health 的所有朋友和同事。感谢你们不仅允许我专注于这个努力，还支持我和我的工作，充当我的咨询板，充当我的试读者和评论家，同时也鼓励我并成为我的推动者。

致所有在纽约和全球的 CoffeeOps 的朋友们。你们慷慨地让我向你们倾诉我的想法，并挑战你们，你们也反过来挑战了我。因为有了你们的贡献，这本书变得更好了。

致著名的可观察性专家和神谕 Liz Fong-Jones。你的指导、方向和代码示例是无价的，没有你的慷慨，这本书将会更难写，结果也会更差。

致我的技术审阅者 Lee Atchison，Alvaro Atienza，David Nicponski，Natalie Pistunovich 和 James Quigley。感谢你们有耐心地阅读我写的每一个字（甚至是脚注）。因为你们的敏锐目光和辛勤工作，这本书变得更好了。

最后，致 O’Reilly Media 辛勤工作的整个编辑和艺术团队，我有幸与你们共事，特别是 Amelia Blevins，Danny Elfanbaum 和 Zan McQuade。2020 年确实是一个非常有趣的一年，但是你们的善良、耐心和支持帮助我度过了难关。

¹ 包括 CNCF Sandbox、Incubating 和 Graduated 的基于代码的（非规范）项目，截至 2021 年 2 月。
